<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>
        Git Demysitified ::
        Imran Hossain
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="How does git work internally?
This document is supposed to be a complete and concise guide to understand the mechanics of Git.
This is a version controlled living document See its earlier versions at GitHub If you want to contribute, raise a Pull request Or file issues to report bugs/inconsistencies Last edited on — Dec 22, 2019
Table of contents # Introduction
Version Control Systems History What is Git? Snapshots, not Differences Nearly every operation is local Git has integrity Git generally only adds data Manager of trees Basic commands"
/>
<meta
  name="keywords"
  content=""
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="/post/git-demystified/" />







<link rel="stylesheet" href="/css/style.css" />

<link rel="stylesheet" href="/style.css" />


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png" />
<link rel="shortcut icon" href="/img/favicon.png" />


<link href="/fonts/Inter-Italic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Regular.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Medium.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-MediumItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Bold.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-BoldItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Git Demysitified"/>
<meta name="twitter:description" content="This document is supposed to be a complete and concise guide to understand the mechanics of Git."/>



<meta property="og:title" content="Git Demysitified" />
<meta property="og:description" content="This document is supposed to be a complete and concise guide to understand the mechanics of Git." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/git-demystified/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-05-16T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-05-16T00:00:00+00:00" /><meta property="og:site_name" content="Imran Hossain" />






  </head>
  <body class="dark-theme">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >cd /home/imran</span
    >
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/post/">Blogs</a></li>
        
      
        
          <li><a href="/about/">About me</a></li>
        
      
        
          <li><a href="/showcase/">Showcase</a></li>
        
      
      
        <ul class="menu__sub-inner">
          <li class="menu__sub-inner-more-trigger">
            Show more
            <span class="menu__sub-inner-more-trigger-icon"
              ><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span
            >
          </li>
          <ul class="menu__sub-inner-more hidden">
            
              
                <li><a href="/tags/">Tags</a></li>
              
            
              
                <li><a href="/categories/">Categories</a></li>
              
            
              
                <li><a href="/post/">Archives</a></li>
              
            
          </ul>
        </ul>
      
      
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/post/">Blogs</a></li>
      
    
      
        <li><a href="/about/">About me</a></li>
      
    
      
        <li><a href="/showcase/">Showcase</a></li>
      
    
      
        <li><a href="/tags/">Tags</a></li>
      
    
      
        <li><a href="/categories/">Categories</a></li>
      
    
      
        <li><a href="/post/">Archives</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <article class="post">
    <h1 class="post-title">Git Demysitified</h1>
    <div class="post-meta">
      
        <time class="post-date">
          2023-05-16
        </time>

        
      

      
        <span class="post-author"
          >— Written by Imran Hossain</span
        >


      
    </div>

    
      <span class="post-tags">
        
          <a href="/tags/git/">#git</a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      
      <p>How does git work internally?</p>
<p>This document is supposed to be a complete and concise guide to understand the mechanics of Git.</p>
<ul>
<li>This is a version controlled <a href="https://en.wikipedia.org/wiki/Living_document">living
document</a></li>
<li>See its <a href="https://github.com/musq/www/commits/master/_posts/2019-07-06-git-demystified.md">earlier
versions</a>
at GitHub</li>
<li>If you want to contribute, raise a Pull request</li>
<li>Or <a href="https://github.com/musq/www/issues/new">file issues</a>
to report bugs/inconsistencies</li>
</ul>
<p><strong>Last edited on — Dec 22, 2019</strong></p>
<!-- raw HTML omitted -->
<h2 id="table-of-contents">
  Table of contents
  <a href="#table-of-contents" class="h-anchor" aria-hidden="true">#</a>
</h2>
<hr>
<ol>
<li>
<p><a href="#introduction">Introduction</a></p>
<ul>
<li><a href="#version-control-systems">Version Control Systems</a></li>
<li><a href="#history">History</a></li>
<li><a href="#what-is-git">What is Git?</a>
<ul>
<li><a href="#snapshots-not-differences">Snapshots, not Differences</a></li>
<li><a href="#nearly-every-operation-is-local">Nearly every operation is
local</a></li>
<li><a href="#git-has-integrity">Git has integrity</a></li>
<li><a href="#git-generally-only-adds-data">Git generally only adds data</a></li>
<li><a href="#manager-of-trees">Manager of trees</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#basic-commands">Basic commands</a></p>
<ul>
<li><a href="#config">Config</a></li>
<li><a href="#help">Help</a></li>
<li><a href="#ignore">Ignore</a></li>
<li><a href="#init">Init</a></li>
<li><a href="#status">Status</a></li>
<li><a href="#add">Add</a></li>
<li><a href="#diff">Diff</a></li>
<li><a href="#commit">Commit</a></li>
<li><a href="#move">Move</a></li>
<li><a href="#remove">Remove</a></li>
<li><a href="#log">Log</a></li>
<li><a href="#grep">Grep</a></li>
<li><a href="#show">Show</a></li>
<li><a href="#clean">Clean</a></li>
<li><a href="#tags">Tags</a></li>
<li><a href="#stash">Stash</a></li>
<li><a href="#remote">Remote</a></li>
<li><a href="#fetch">Fetch</a></li>
<li><a href="#pull">Pull</a></li>
<li><a href="#push">Push</a></li>
<li><a href="#branch">Branch</a></li>
<li><a href="#reset">Reset</a></li>
<li><a href="#checkout">Checkout</a></li>
<li><a href="#reset-vs-checkout">Reset vs Checkout</a></li>
<li><a href="#cherry-pick">Cherry Pick</a></li>
<li><a href="#revert">Revert</a></li>
<li><a href="#merge">Merge</a></li>
<li><a href="#rebase">Rebase</a>
<ul>
<li><a href="#rebase-hell">Rebase Hell</a></li>
</ul>
</li>
<li><a href="#rebase-vs-merge">Rebase vs Merge</a></li>
<li><a href="#submodules">Submodules</a></li>
</ul>
</li>
<li>
<p><a href="#debugging">Debugging</a></p>
<ul>
<li><a href="#blame">Blame</a></li>
<li><a href="#bisect">Bisect</a></li>
</ul>
</li>
<li>
<p><a href="#tools">Tools</a></p>
<ul>
<li><a href="#git-desktop">Git Desktop</a></li>
<li><a href="#git-gui">Git GUI</a></li>
<li><a href="#git-web">Git Web</a></li>
<li><a href="#credentials">Credentials</a></li>
<li><a href="#rerere-reuse-recorded-resolution">Rerere (reuse recorded
resolution)</a></li>
<li><a href="#reflog">Reflog</a></li>
<li><a href="#filter-branch">Filter-branch</a></li>
<li><a href="#bundle">Bundle</a></li>
<li><a href="#replace">Replace</a></li>
<li><a href="#rev-parse">Rev parse</a></li>
</ul>
</li>
<li>
<p><a href="#personalization">Personalization</a></p>
<ul>
<li><a href="#attributes">Attributes</a></li>
<li><a href="#refspec">Refspec</a></li>
<li><a href="#hooks">Hooks</a>
<ul>
<li><a href="#commit-hooks">Commit hooks</a></li>
<li><a href="#email-hooks">Email hooks</a></li>
<li><a href="#other-hooks">Other hooks</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#workflows">Workflows</a></p>
<ul>
<li><a href="#contributors">Contributors</a>
<ul>
<li><a href="#generate-pull-request-template">Generate pull request
template</a></li>
<li><a href="#send-commit-patches-via-email">Send commit patches via
email</a></li>
<li><a href="#create-pull-requests-on-github">Create pull requests on
GitHub</a></li>
</ul>
</li>
<li><a href="#owners-maintainers">Owners/Maintainers</a>
<ul>
<li><a href="#merge-patches-from-email">Merge patches from email</a></li>
<li><a href="#merge-pull-requests-on-github">Merge pull requests on
GitHub</a></li>
<li><a href="#merge-github-pull-requests-locally">Merge GitHub pull requests
locally</a>
<ul>
<li><a href="#1-using-pull-request-patches">Using pull request
patches</a></li>
<li><a href="#2-using-pull-request-refs">Using pull request refs</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#releases">Releases</a></p>
<ul>
<li><a href="#semantic-versioning">Semantic versioning</a></li>
<li><a href="#generate-build-number">Generate Build number</a></li>
<li><a href="#prepare-assets">Prepare Assets</a></li>
<li><a href="#gpg-public-key-as-tag">GPG public key as tag</a></li>
</ul>
</li>
<li>
<p><a href="#internals">Internals</a></p>
<ul>
<li><a href="#objects">Objects</a></li>
<li><a href="#references">References</a>
<ul>
<li><a href="#remote-refs">Remote refs</a></li>
</ul>
</li>
<li><a href="#packfiles">Packfiles</a></li>
<li><a href="#garbage-collection">Garbage collection</a></li>
<li><a href="#fsck">Fsck</a></li>
<li><a href="#removing-objects">Removing objects</a></li>
<li><a href="#environment-variables">Environment variables</a></li>
</ul>
</li>
<li>
<p><a href="#extras">Extras</a></p>
<ul>
<li><a href="#bashzsh-helpers">Bash/Zsh helpers</a></li>
<li><a href="#bare-repo">Bare Repo</a></li>
<li><a href="#git-on-a-server">Git on a server</a></li>
<li><a href="#scripting-github">Scripting GitHub</a></li>
</ul>
</li>
<li>
<p><a href="#source">Source</a></p>
</li>
</ol>
<!-- raw HTML omitted -->
<h2 id="introduction">
  Introduction
  <a href="#introduction" class="h-anchor" aria-hidden="true">#</a>
</h2>
<hr>
<h3 id="version-control-systems">
  Version Control Systems
  <a href="#version-control-systems" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>Version control is a system that records changes to a file or set of
files over time so that you can recall specific versions later. There
are three types of version control systems:</p>
<ol>
<li><strong>Local</strong> &mdash; LVCS has a simple database that locally keeps all the
changes to files under revision control. e.g. RCS</li>
<li><strong>Centralized</strong> &mdash; CVCS has a single server that contains all the
versioned files, and a number of clients that check out files from that
central place. Clients don&rsquo;t have all the history at a time. e.g.
Subversion, Perforce</li>
<li><strong>Distributed</strong> &mdash; DVCS clients don’t just check out the latest
snapshot of the files; rather, they fully mirror the repository,
including its full history. Every clone is really a full backup of all
the data. e.g. Git, Mercurial, Bazaar</li>
</ol>
<h3 id="history">
  History
  <a href="#history" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>In 2002, the Linux kernel project began using a proprietary DVCS called
BitKeeper. In 2005, the relationship between the Linux community and
the commercial company that developed BitKeeper broke down, and the
tool’s free-of-charge status was revoked. Linus Torvalds (creator of
Linux) began developing Git with the following goals &mdash;</p>
<ul>
<li>Speed</li>
<li>Simple design</li>
<li>Strong support for non-linear development (thousands of parallel
branches)</li>
<li>Fully distributed</li>
<li>Able to handle large projects like the Linux kernel efficiently
(speed and data size)</li>
</ul>
<h3 id="what-is-git">
  What is Git?
  <a href="#what-is-git" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>Git stores and thinks about information in a very different way, and
understanding these differences will help you avoid becoming confused
while using it.</p>
<h4 id="snapshots-not-differences">
  Snapshots, not Differences
  <a href="#snapshots-not-differences" class="h-anchor" aria-hidden="true">#</a>
</h4>
<p>Most VCSs store data as differences (deltas) over the previous versions.</p>
<p><img src="/git/deltas.png" alt="Deltas"></p>
<p>However, Git thinks of its data more like a series of snapshots of a
miniature filesystem. With Git, every time you commit, or save the
state of your project, Git basically takes a picture of what all your
files look like at that moment and stores a reference to that snapshot.
To be efficient, if files have not changed, Git doesn’t store the file
again, just a link to the previous identical file it has already
stored. Git thinks about its data more like a stream of snapshots.</p>
<p><img src="/git/snapshots.png" alt="Snapshots"></p>
<h4 id="nearly-every-operation-is-local">
  Nearly every operation is local
  <a href="#nearly-every-operation-is-local" class="h-anchor" aria-hidden="true">#</a>
</h4>
<p>Most operations in Git need only local files and resources to operate.
Generally no information is needed from another computer on your
network. This also means that there is very little you can’t do if
you’re offline. This may not seem like a huge deal, but you may be
surprised what a big difference it can make.</p>
<h4 id="git-has-integrity">
  Git has integrity
  <a href="#git-has-integrity" class="h-anchor" aria-hidden="true">#</a>
</h4>
<p>Everything in Git is checksummed before it is stored and is then
referred to by that checksum. This means it’s impossible to change the
contents of any file or directory without Git knowing about it. This
functionality is built into Git at the lowest levels and is integral
to its philosophy. You can’t lose information in transit or get file
corruption without Git being able to detect it.</p>
<p>The mechanism that Git uses for this checksumming is called a SHA-1
hash. This is a 40-character string composed of hexadecimal characters
(0–9 and a–f) and calculated based on the contents of a file or
directory structure in Git.</p>
<h4 id="git-generally-only-adds-data">
  Git generally only adds data
  <a href="#git-generally-only-adds-data" class="h-anchor" aria-hidden="true">#</a>
</h4>
<p>When you do actions in Git, nearly all of them only add data to the Git
database. It is hard to get the system to do anything that is not
undoable or to make it erase data in any way. This makes using Git a
joy because we know we can experiment without the danger of severely
screwing things up.</p>
<h4 id="manager-of-trees">
  Manager of trees
  <a href="#manager-of-trees" class="h-anchor" aria-hidden="true">#</a>
</h4>
<p>Git is a manager of three different trees. By &ldquo;tree&rdquo; here, we really mean
&ldquo;collection of files&rdquo;, not specifically the data structure. (There are
a few cases where the index doesn’t exactly act like a tree, but for
our purposes it is easier to think about it this way for now.)</p>
<ol>
<li><code>HEAD</code> - Last commit snapshot, next parent (commit database)</li>
<li><code>Index</code> - Proposed next commit snapshot (staging area)</li>
<li><code>Working Directory</code> - Sandbox</li>
</ol>
<p>The first two trees store their content in an efficient but
inconvenient manner, inside the <code>.git</code> folder. The working directory
unpacks them into actual files, which makes it much easier for you
to edit them. Think of the working directory as a sandbox, where you
can try changes out before committing them to your staging area (index)
and then to history.</p>
<p><img src="/git/reset-workflow.png" alt="Reset workflow"></p>
<p>Each file in your working directory can be in one of two states:</p>
<ol>
<li><code>tracked</code> - Files that were in the last snapshot; they can be
<code>unmodified</code>, <code>modified</code>, or <code>staged</code>. In short, tracked files are
files that Git knows about.</li>
<li><code>untracked</code> - Everything else — any files in your working directory
that were not in your last snapshot and are not in your staging area.</li>
</ol>
<p>When you first clone a repository, all of your files will be tracked
and unmodified because Git just checked them out and you haven’t
edited anything.
As you edit files, Git sees them as modified, because you’ve changed
them since your last commit. As you work, you selectively stage these
modified files and then commit all those staged changes, and the
cycle repeats.</p>
<p><img src="/git/lifecycle.png" alt="Lifecycle"></p>
<p>There are three types of commits:</p>
<ol>
<li><code>First commit</code> - has no parent</li>
<li><code>Normal commit</code> - has 1 parent</li>
<li><code>Merge commit</code> - has 2 parents</li>
</ol>
<!-- raw HTML omitted -->
<h2 id="basic-commands">
  Basic commands
  <a href="#basic-commands" class="h-anchor" aria-hidden="true">#</a>
</h2>
<hr>
<h3 id="config">
  Config
  <a href="#config" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>All the settings are stored in &mdash;</p>
<ol>
<li>System - <code>/etc/gitconfig</code></li>
<li>Global - <code>~/.gitconfig</code> or <code>~/.config/git/config</code></li>
<li>Local - <code>/path/to/repo/.git/config</code></li>
</ol>
<p>Each level overrides values in the previous level, so values in
<code>.git/config</code> trump those in <code>/etc/gitconfig</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># List all configs with source</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Git uses the last value for each unique key it sees in its output</span>
</span></span><span style="display:flex;"><span>git config --list --show-origin
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set options</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Accepts --system, --global, --local(default)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Name (required to use git)</span>
</span></span><span style="display:flex;"><span>git config --global user.name <span style="color:#e6db74">&#34;John Doe&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Email (required to use git)</span>
</span></span><span style="display:flex;"><span>git config --global user.email johndoe@example.com
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Editor</span>
</span></span><span style="display:flex;"><span>git config --global core.editor vim
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#  Commit template</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://gist.github.com/adeekshith/cd4c95a064977cdc6c50</span>
</span></span><span style="display:flex;"><span>git config --global commit.template ~/.gitmessage.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pager (used in scrolling)</span>
</span></span><span style="display:flex;"><span>git config --global core.pager less
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># GnuPG key (used in signing commits)</span>
</span></span><span style="display:flex;"><span>git config --global user.signingkey &lt;gpg-key-id&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Global gitignore</span>
</span></span><span style="display:flex;"><span>git config --global core.excludesfile ~/.gitignore_global
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Enable colors</span>
</span></span><span style="display:flex;"><span>git config --global color.ui true
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Meta diff - blue foreground, black background, and bold text</span>
</span></span><span style="display:flex;"><span>git config --global color.diff.meta <span style="color:#e6db74">&#34;blue black bold&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Other options</span>
</span></span><span style="display:flex;"><span>color.branch
</span></span><span style="display:flex;"><span>color.diff
</span></span><span style="display:flex;"><span>color.interactive
</span></span><span style="display:flex;"><span>color.status
</span></span></code></pre></div><h3 id="help">
  Help
  <a href="#help" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Detailed man page for config command</span>
</span></span><span style="display:flex;"><span>git help config
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Show concise options for config command</span>
</span></span><span style="display:flex;"><span>git config -h
</span></span></code></pre></div><h3 id="ignore">
  Ignore
  <a href="#ignore" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>Often, you’ll have a class of files that you don’t want Git to
automatically add or even show as being untracked. These are generally
automatically generated files such as log files or files produced by
your build system. In such cases, you can create a file named
<code>.gitignore</code> at the project root and add patterns matching file
names/paths to ignore them.</p>
<p>The rules for the patterns to put in the .gitignore file are as follows:</p>
<ul>
<li>Blank lines or lines starting with <code>#</code> are ignored</li>
<li>Standard glob patterns work, and will be applied recursively
throughout the entire working tree</li>
<li>You can start patterns with a forward slash <code>/</code> to avoid recursivity</li>
<li>You can end patterns with a forward slash <code>/</code> to specify a directory</li>
<li>You can negate a pattern by starting it with an exclamation point <code>!</code></li>
</ul>
<p>Checkout GitHub&rsquo;s suggested ignore patterns for different languages.
<a href="https://github.com/github/gitignore">https://github.com/github/gitignore</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># See inside .gitignore</span>
</span></span><span style="display:flex;"><span>cat .gitignore
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example patterns</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Ignore all .a files</span>
</span></span><span style="display:flex;"><span>*.a
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># But do track lib.a, even though you&#39;re ignoring .a files above</span>
</span></span><span style="display:flex;"><span>!lib.a
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Only ignore the TODO file in the current directory, not subdir/TODO</span>
</span></span><span style="display:flex;"><span>/TODO
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Ignore all files in any directory named build</span>
</span></span><span style="display:flex;"><span>build/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Ignore doc/notes.txt, but not doc/server/arch.txt</span>
</span></span><span style="display:flex;"><span>doc/*.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Ignore all .pdf files in the doc/ directory and any of its</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># subdirectories</span>
</span></span><span style="display:flex;"><span>doc/**/*.pdf
</span></span></code></pre></div><h3 id="init">
  Init
  <a href="#init" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Initialize a git repo</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Run it at the project root</span>
</span></span><span style="display:flex;"><span>git init
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Clone an existing project</span>
</span></span><span style="display:flex;"><span>git clone https://github.com/musq/dotfiles
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Clone project into a different directory</span>
</span></span><span style="display:flex;"><span>git clone https://github.com/musq/dotfiles ~/my-dotfiles
</span></span></code></pre></div><h3 id="status">
  Status
  <a href="#status" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>See the status of files.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Status</span>
</span></span><span style="display:flex;"><span>git status
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Short status</span>
</span></span><span style="display:flex;"><span>git status -s
</span></span></code></pre></div><h3 id="add">
  Add
  <a href="#add" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>Move changes to index (staging area).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Stage all files in the current directory</span>
</span></span><span style="display:flex;"><span>git add *
</span></span><span style="display:flex;"><span><span style="color:#75715e"># or</span>
</span></span><span style="display:flex;"><span>git add .
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Stage files selectively</span>
</span></span><span style="display:flex;"><span>git add file1 dir1/file2 dir2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Interactive add</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Use this to stage patches</span>
</span></span><span style="display:flex;"><span>git add -i
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Undo actions caused by the add command</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Unstage all files</span>
</span></span><span style="display:flex;"><span>git reset *
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Unstage all files in the current directory</span>
</span></span><span style="display:flex;"><span>git reset .
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Unstage files selectively</span>
</span></span><span style="display:flex;"><span>git reset file1 dir1/file2 dir2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Detailed explanation of the reset command is presented</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># later in a section below. Be sure to check it out.</span>
</span></span></code></pre></div><h3 id="diff">
  Diff
  <a href="#diff" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># View differences for files in the working tree</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Supports selective files as arguments, similar to the add command</span>
</span></span><span style="display:flex;"><span>git diff
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># View differences for files in the staging area</span>
</span></span><span style="display:flex;"><span>git diff --cached
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Algorithms</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://stackoverflow.com/a/20199975</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Use a different algorithm to determine diff</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [options]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - myers     - (default) The basic greedy diff algorithm</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - minimal   - Myers plus trying to minimize the patch size</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - patience  - Attempts to trade readability of the patch versus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               patch size and processing time</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - histogram - Extends the patience algorithm to be faster and</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#               supports &#34;low-occurrence common elements&#34;</span>
</span></span><span style="display:flex;"><span>git diff --patience
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set a diff algorithm globally</span>
</span></span><span style="display:flex;"><span>git config --global diff.algorithm histogram
</span></span></code></pre></div><h3 id="commit">
  Commit
  <a href="#commit" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Commit staging area - Write commit message in an editor</span>
</span></span><span style="display:flex;"><span>git commit
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Commit staging area - Write commit message in command line</span>
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#e6db74">&#34;first commit&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Commit staging area and sign it using GPG key</span>
</span></span><span style="display:flex;"><span>git commit -S -m <span style="color:#e6db74">&#34;first commit&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Commit all the changes: staging area + working tree</span>
</span></span><span style="display:flex;"><span>git commit -a -m <span style="color:#e6db74">&#34;first commit&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Ammend the last commit</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History#_git_amend</span>
</span></span><span style="display:flex;"><span>git commit --ammend -m <span style="color:#e6db74">&#34;first commit - fix&#34;</span>
</span></span></code></pre></div><h3 id="move">
  Move
  <a href="#move" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Rename a file</span>
</span></span><span style="display:flex;"><span>git mv file1 file2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Move and rename a file</span>
</span></span><span style="display:flex;"><span>git mv file1 dir1/file2
</span></span></code></pre></div><h3 id="remove">
  Remove
  <a href="#remove" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Remove file from staging area</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Supports selective files as arguments, similar to the add command</span>
</span></span><span style="display:flex;"><span>git rm file
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This file wouldn&#39;t be tracked from the next commit. Delete from</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># working tree as well.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Keep file in working tree, remove from staging area</span>
</span></span><span style="display:flex;"><span>git rm --cached file
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Force remove from staging area and delete from working tree</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># DANGEROUS - It&#39;s a safety feature, don&#39;t use casually</span>
</span></span><span style="display:flex;"><span>git rm -f file
</span></span></code></pre></div><h3 id="log">
  Log
  <a href="#log" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Show logs</span>
</span></span><span style="display:flex;"><span>git log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Show only the last 4 commits</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Use any natural number you want</span>
</span></span><span style="display:flex;"><span>git log -4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Also show the difference introduced in each commit</span>
</span></span><span style="display:flex;"><span>git log -p
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Show signatures</span>
</span></span><span style="display:flex;"><span>git log --show-signature
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Abbreviated stats (summary) for each commit</span>
</span></span><span style="display:flex;"><span>git log --stat
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Format the log</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [options] - oneline, short, full, fuller</span>
</span></span><span style="display:flex;"><span>git log --pretty<span style="color:#f92672">=</span>oneline
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Use custom format</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/docs/pretty-formats</span>
</span></span><span style="display:flex;"><span>git log --pretty<span style="color:#f92672">=</span>format:<span style="color:#e6db74">&#34;%h - %an, %ar : %s&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Display short commit SHA1 hash</span>
</span></span><span style="display:flex;"><span>git log --abbrev-commit
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If the first 7 chars are common between 2 commits, git will show</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 8 chars for both, 7 for the rest of them, to ensure uniqueness</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Shorthand for --pretty=oneline --abbrev-commit</span>
</span></span><span style="display:flex;"><span>git log --oneline
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Show refs information</span>
</span></span><span style="display:flex;"><span>git log --decorate
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ASCII graph to show branch and merge history</span>
</span></span><span style="display:flex;"><span>git log --graph --oneline
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Don&#39;t display merge commits</span>
</span></span><span style="display:flex;"><span>git log --no-merges
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Show reflog information</span>
</span></span><span style="display:flex;"><span>git log -g
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Shortlog</span>
</span></span><span style="display:flex;"><span>git shortlog
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Filters</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/docs/git-log</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Filter by date</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [options] - since, until</span>
</span></span><span style="display:flex;"><span>git log --since 2.weeks.4.days.3.seconds
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Filter by authors</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Match (partial) either ashish or ranjan</span>
</span></span><span style="display:flex;"><span>git log --author ashish --author ranjan
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Search in commit messages</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Match (partial) either searchterm1 or searchterm2</span>
</span></span><span style="display:flex;"><span>git log --grep searchterm1 --grep searchterm2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pickaxe</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Find commits that added or removed a reference to &#39;searchterm&#39;</span>
</span></span><span style="display:flex;"><span>git log -S searchterm
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List differnces between refs (branches, tags, commits)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List commits that are present in dev but not in master</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># All of them are equivalent</span>
</span></span><span style="display:flex;"><span>git log master..dev
</span></span><span style="display:flex;"><span>git log dev --not master
</span></span><span style="display:flex;"><span>git log dev ^master
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The second/third method can be used to specify multiple branches</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List union of (dev1, dev2), remove commits in master</span>
</span></span><span style="display:flex;"><span>git log dev1 dev2 --not master
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List dev1, remove commits in union of (dev2, master)</span>
</span></span><span style="display:flex;"><span>git log dev1 ^dev2 ^master
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List the commits that are present</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - in dev but not in master, and</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - in master but not in dev</span>
</span></span><span style="display:flex;"><span>git log master...dev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List the above changes with markers</span>
</span></span><span style="display:flex;"><span>git log master...dev --left-right
</span></span></code></pre></div><h3 id="grep">
  Grep
  <a href="#grep" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/docs/git-grep</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Search for &#39;searchterm&#39; in the git database</span>
</span></span><span style="display:flex;"><span>git grep searchterm
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Print line numbers</span>
</span></span><span style="display:flex;"><span>git grep -n searchterm
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Summarise search by only listing file name with the count of</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># matches in each file</span>
</span></span><span style="display:flex;"><span>git grep -c searchterm
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Show the context of match by displaying the enclosing function</span>
</span></span><span style="display:flex;"><span>git grep -p searchterm
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Group searches by files</span>
</span></span><span style="display:flex;"><span>git grep --heading searchterm
</span></span></code></pre></div><h3 id="show">
  Show
  <a href="#show" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Show details</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Accepts branch, tag, commit</span>
</span></span><span style="display:flex;"><span>git show a1b2c3d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Show where your master was yesterday</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Accepts 2.weeks.1.day.8.hours.6.seconds</span>
</span></span><span style="display:flex;"><span>git show master@<span style="color:#f92672">{</span>yesterday<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Parent of the HEAD (level-1)</span>
</span></span><span style="display:flex;"><span>git show HEAD^
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Second parent of the HEAD (for merge commits) (level-1)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># There can be a maximum of 2 parents for a commit</span>
</span></span><span style="display:flex;"><span>git show HEAD^2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Parent of the HEAD (level-1)</span>
</span></span><span style="display:flex;"><span>git show HEAD~
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Grandparent of the HEAD with the first parent (level-2)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Equivalent to git show HEAD^1~1</span>
</span></span><span style="display:flex;"><span>git show HEAD~2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># grandparent of the HEAD with the second parent (level-2)</span>
</span></span><span style="display:flex;"><span>git show HEAD^2~1
</span></span></code></pre></div><h3 id="clean">
  Clean
  <a href="#clean" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Clean the working tree</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># DANGEROUS - Removes untracked files</span>
</span></span><span style="display:flex;"><span>git clean
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Ignores files in .gitignore</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Dry run</span>
</span></span><span style="display:flex;"><span>git clean -n
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Remove subdirectories which become empty as a result of cleaning</span>
</span></span><span style="display:flex;"><span>git clean -d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Safety feature to avoid deleting unsaved work</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Avoids submodules</span>
</span></span><span style="display:flex;"><span>git clean -f
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Clean the submodules as well</span>
</span></span><span style="display:flex;"><span>git clean -ff
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Remove all files, even which are present in .gitignore</span>
</span></span><span style="display:flex;"><span>git clean -x
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Interactive clean</span>
</span></span><span style="display:flex;"><span>git clean -i
</span></span></code></pre></div><h3 id="tags">
  Tags
  <a href="#tags" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># List tags</span>
</span></span><span style="display:flex;"><span>git tag
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List all the tags which match v1.8.*</span>
</span></span><span style="display:flex;"><span>git tag -l <span style="color:#e6db74">&#34;v1.8.*&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a lightweight tag named v1.9.2 from HEAD</span>
</span></span><span style="display:flex;"><span>git tag v1.9.2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a lightweight tag named v1.9.2 from a1b2c3d</span>
</span></span><span style="display:flex;"><span>git tag v1.9.2 a1b2c3d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create annotated tag named v1.9.2 from HEAD</span>
</span></span><span style="display:flex;"><span>git tag -a v1.9.2 -m <span style="color:#e6db74">&#34;First release&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create signed annotated tag named v1.9.2 from a1b2c3d</span>
</span></span><span style="display:flex;"><span>git tag -s v1.9.2 -m <span style="color:#e6db74">&#34;First release&#34;</span> a1b2c3d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Delete tag v1.9.2</span>
</span></span><span style="display:flex;"><span>git tag -d v1.9.2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Verify tag v1.9.2 for a valid signature</span>
</span></span><span style="display:flex;"><span>git tag -v v1.9.2
</span></span></code></pre></div><h3 id="stash">
  Stash
  <a href="#stash" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Stash the tracked modified files onto a stack</span>
</span></span><span style="display:flex;"><span>git stash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Stash the untracked files as well</span>
</span></span><span style="display:flex;"><span>git stash -u
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Stash all the files, including the files specified in .gitignore</span>
</span></span><span style="display:flex;"><span>git stash -a
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Stash the changes but do not remove the changes from the staging area</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># It will move the unstaged tracked files to stash</span>
</span></span><span style="display:flex;"><span>git stash --keep-index
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Equivalent to stash + apply --index</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Interactive stashing of patches</span>
</span></span><span style="display:flex;"><span>git stash --patch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List the stash stack</span>
</span></span><span style="display:flex;"><span>git stash list
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Apply the top of the stack to the working tree</span>
</span></span><span style="display:flex;"><span>git stash apply
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Run apply and stage the relevant changes as it were before the stash</span>
</span></span><span style="display:flex;"><span>git stash apply --index
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Drop the top entry of the stack</span>
</span></span><span style="display:flex;"><span>git stash drop
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Apply + Drop in one go</span>
</span></span><span style="display:flex;"><span>git stash pop
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Don&#39;t use it directly. Sometimes it will stop at apply due to merge</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># conflicts. Stash hasn&#39;t been dropped yet, and you&#39;ll forget to</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># manually drop it after resolving conflicts. And a few weeks down the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># line, when you run git stash pop again, it&#39;ll you give you conflicts</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Destash on a new branch</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Creates a new branch with the selected branch name, checks out the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># commit you were on when you stashed your work, reapplies your work</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># there, and then drops the stash if it applies successfully</span>
</span></span><span style="display:flex;"><span>git stash branch &lt;new branchname&gt;
</span></span></code></pre></div><h3 id="remote">
  Remote
  <a href="#remote" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># List all the remotes</span>
</span></span><span style="display:flex;"><span>git remote -v
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add a remote</span>
</span></span><span style="display:flex;"><span>git remote add musq https://github.com/musq/dotfiles
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Change the remote URL</span>
</span></span><span style="display:flex;"><span>git remote set-url musq https://github.com/musq/dotfiles
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Show detailed remote information</span>
</span></span><span style="display:flex;"><span>git remote show musq
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Rename a remote</span>
</span></span><span style="display:flex;"><span>git remote rename musq musq-dotfiles
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Remove a remote</span>
</span></span><span style="display:flex;"><span>git remote rm musq
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set a default push to a remote</span>
</span></span><span style="display:flex;"><span>git config --local remote.pushDefault origin
</span></span></code></pre></div><h3 id="fetch">
  Fetch
  <a href="#fetch" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><code>FETCH_HEAD</code> records the branch which you fetched from a remote
repository with your last git fetch invocation.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Fetch all branches from all remotes</span>
</span></span><span style="display:flex;"><span>git fetch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Fetch all branches from upstream</span>
</span></span><span style="display:flex;"><span>git fetch upstream
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Fetch only master branch from upstream</span>
</span></span><span style="display:flex;"><span>git fetch upstream master
</span></span></code></pre></div><h3 id="pull">
  Pull
  <a href="#pull" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># If your current branch is set up to track a remote branch, fetch and</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># then merge that remote branch into your current branch</span>
</span></span><span style="display:flex;"><span>git pull
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Fetch master branch from upstream and merge into current branch</span>
</span></span><span style="display:flex;"><span>git pull upstream master
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Pull changes and rebase current branch onto the FETCH_HEAD</span>
</span></span><span style="display:flex;"><span>git pull --rebase
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This is equivalent to the following 2 commands</span>
</span></span><span style="display:flex;"><span>git fetch
</span></span><span style="display:flex;"><span>git rebase FETCH_HEAD
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># See sections for Branch, Merge and Rebase below for detailed</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># explanation of these commands</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># NOTE - Avoid use of pull. Instead use fetch + merge individually</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># It gives you more control over the steps</span>
</span></span></code></pre></div><h3 id="push">
  Push
  <a href="#push" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># If your current branch is set up to track a remote branch, push</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># changes from current branch to that remote branch</span>
</span></span><span style="display:flex;"><span>git push
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Only push master branch to origin/master</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Git expands it to git push origin refs/heads/master:refs/heads/master</span>
</span></span><span style="display:flex;"><span>git push origin master
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Force push dev branch on origin/dev</span>
</span></span><span style="display:flex;"><span>git push origin dev -f
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Push dev branch to serverfix</span>
</span></span><span style="display:flex;"><span>git push origin dev:serverfix
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Delete dev branch on origin</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Local dev branch will not be deleted</span>
</span></span><span style="display:flex;"><span>git push origin --delete dev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Push tags</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Push tag v1.9.2 to origin</span>
</span></span><span style="display:flex;"><span>git push origin v1.9.2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Push all tags to origin</span>
</span></span><span style="display:flex;"><span>git push origin --tags
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Delete tag v1.9.2 on the origin</span>
</span></span><span style="display:flex;"><span>git push origin --delete v1.9.2
</span></span></code></pre></div><h3 id="branch">
  Branch
  <a href="#branch" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>Branches help you diverge from the main line of development and
continue to do work without messing with that main line.</p>
<p>The way Git branches is incredibly lightweight, making branching
operations nearly instantaneous, and switching back and forth between
branches generally just as fast. Unlike many other VCSs, Git encourages
workflows that branch and merge often, even multiple times in a day.</p>
<p>As mentioned in the History section, Git doesn’t store data as a series
of changesets or differences, but instead as a series of snapshots.
A commit is an <strong>immovable pointer</strong> to these snapshots
and is based on of it&rsquo;s parent commit. Thus changes are stored in
a serial fashion chained to each other via commits.</p>
<p>A branch in Git is simply a lightweight <strong>movable pointer</strong> to a commit.
The default branch name in Git is master. As you start making commits,
you’re given a master branch that points to the last commit you made.
Every time you commit, the master branch pointer moves forward
automatically.</p>
<p><img src="/git/branch-and-history.png" alt="Branch and History"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/book/en/v2/Git-Branching-Branches-in-a-Nutshell</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List all branches</span>
</span></span><span style="display:flex;"><span>git branch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List all branches with detailed info</span>
</span></span><span style="display:flex;"><span>git branch -vv
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a new banch dev from the current branch</span>
</span></span><span style="display:flex;"><span>git branch dev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a new banch dev from the master branch</span>
</span></span><span style="display:flex;"><span>git branch dev master
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Delete dev branch</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Safe to use - only deletes when the dev branch has been</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># merged in the current branch</span>
</span></span><span style="display:flex;"><span>git branch -d dev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Force delete dev branch</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># DANGEROUS</span>
</span></span><span style="display:flex;"><span>git branch -D dev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Show branches which have been merged into the current branch</span>
</span></span><span style="display:flex;"><span>git branch --merged
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Show branches which have been merged into the master branch</span>
</span></span><span style="display:flex;"><span>git branch --merged master
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Show branches which have not been merged into the current branch</span>
</span></span><span style="display:flex;"><span>git branch --no-merged
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set tracking of current branch to origin/serverfix</span>
</span></span><span style="display:flex;"><span>git branch -u origin/serverfix
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set tracking of master branch to origin/serverfix</span>
</span></span><span style="display:flex;"><span>git branch -u origin/serverfix master
</span></span></code></pre></div><h3 id="reset">
  Reset
  <a href="#reset" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><strong>Highly Recommended</strong> — <a href="https://git-scm.com/book/en/v2/Git-Tools-Reset-Demystified">https://git-scm.com/book/en/v2/Git-Tools-Reset-Demystified</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># master - w7x8y9z (current branch)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># dev    - a1b2c3d</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Assume there are no modifications in any file</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># i.e. at present, the output of `git status` is empty</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># WD = Working Directory</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># All of the following commands will move master to a1b2c3d</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git reset --soft dev
</span></span><span style="display:flex;"><span><span style="color:#75715e"># HEAD  - changed   (HEAD now points to a1b2c3d)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Index - unchanged (All the changes between a1b2c3d &amp; w7x8y9z are staged)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># WD    - unchanged (Nothing is unstaged)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Both these commands are equivalent</span>
</span></span><span style="display:flex;"><span>git reset --mixed dev
</span></span><span style="display:flex;"><span>git reset dev
</span></span><span style="display:flex;"><span><span style="color:#75715e"># HEAD  - changed   (HEAD now points to a1b2c3d)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Index - changed   (Nothing is staged)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># WD    - unchanged (All the changes between a1b2c3d &amp; w7x8y9z are unstaged)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git reset --hard dev
</span></span><span style="display:flex;"><span><span style="color:#75715e"># HEAD  - changed   (HEAD now points to a1b2c3d)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Index - changed   (Nothing is staged)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># WD    - changed   (Sanitized. Output of git status would be empty)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Reset with a path</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Unstage a file</span>
</span></span><span style="display:flex;"><span>git reset file
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Equivalent to `git reset HEAD file`</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># HEAD  - unchanged</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Index - changed   (Nothing is staged in file)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># WD    - changed   (Everything is unstaged in file)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># --hard or --soft options cannot be used when argument is a file path</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git reset a1b2c3d file
</span></span><span style="display:flex;"><span><span style="color:#75715e"># HEAD  - unchanged</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Index - changed   (All the changes in file between a1b2c3d and HEAD are staged)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># WD    - changed   (Any remaining changes in file are unstaged)</span>
</span></span></code></pre></div><h3 id="checkout">
  Checkout
  <a href="#checkout" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Switch to dev branch</span>
</span></span><span style="display:flex;"><span>git checkout dev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create and switch to branch dev from the current branch</span>
</span></span><span style="display:flex;"><span>git checkout -b dev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create and switch to branch dev from the master branch</span>
</span></span><span style="display:flex;"><span>git checkout -b dev master
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a local branch from origin/serverfix and start tracking it</span>
</span></span><span style="display:flex;"><span>git checkout --track origin/serverfix
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Synonymous to the previous command only if the branch name (serverfix)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># you’re trying to checkout (a) doesn’t exist and (b) exactly matches</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># a name on only one remote, Git will create a tracking branch for you</span>
</span></span><span style="display:flex;"><span>git checkout serverfix
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Checkout with file path</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Reset the file in the working tree to match the last commit</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># DANGEROUS - Modifies the working tree (don&#39;t use casually)</span>
</span></span><span style="display:flex;"><span>git checkout file
</span></span></code></pre></div><h3 id="reset-vs-checkout">
  Reset vs Checkout
  <a href="#reset-vs-checkout" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>Follow the picture shown below.
<code>commit A</code> is the first commit. <code>commit B</code> is the second commit.</p>
<p>So, <code>commit A</code> is the parent of <code>commit B</code>. Now let&rsquo;s run these two
commands separately and observe the changes they cause.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><code>git reset master</code></th>
<th style="text-align:center"><code>git checkout master</code></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Move current ref to other ref</td>
<td style="text-align:center">Move <code>HEAD</code> to other ref</td>
</tr>
</tbody>
</table>
<p><img src="/git/reset-vs-checkout.png" alt="Reset vs Checkout"></p>
<blockquote>
<p><em>Reset moves the current reference to another tag, commit</em></p>
</blockquote>
<blockquote>
<p><em>Checkout moves the current HEAD to another branch, tag, commit</em></p>
</blockquote>
<p>Here’s a cheat-sheet for which commands affect which trees. The &ldquo;HEAD&rdquo;
column reads “REF” if that command moves the reference (branch) that
HEAD points to, and “HEAD” if it moves HEAD itself. Pay especial
attention to the WD Safe? column — if it says NO, take a second to
think before running that command.</p>
<table>
<thead>
<tr>
<th></th>
<th style="text-align:center">HEAD</th>
<th style="text-align:center">Index</th>
<th style="text-align:center">Workdir</th>
<th style="text-align:center">WD Safe?</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Commit Level</strong></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td><code>reset --soft [commit]</code></td>
<td style="text-align:center">REF</td>
<td style="text-align:center">NO</td>
<td style="text-align:center">NO</td>
<td style="text-align:center">YES</td>
</tr>
<tr>
<td><code>reset [commit]</code></td>
<td style="text-align:center">REF</td>
<td style="text-align:center">YES</td>
<td style="text-align:center">NO</td>
<td style="text-align:center">YES</td>
</tr>
<tr>
<td><code>reset --hard [commit]</code></td>
<td style="text-align:center">REF</td>
<td style="text-align:center">YES</td>
<td style="text-align:center">YES</td>
<td style="text-align:center"><strong>NO</strong></td>
</tr>
<tr>
<td><code>checkout &lt;commit&gt;</code></td>
<td style="text-align:center">HEAD</td>
<td style="text-align:center">YES</td>
<td style="text-align:center">YES</td>
<td style="text-align:center">YES</td>
</tr>
<tr>
<td><strong>File Level</strong></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td><code>reset [commit] &lt;paths&gt;</code></td>
<td style="text-align:center">NO</td>
<td style="text-align:center">YES</td>
<td style="text-align:center">NO</td>
<td style="text-align:center">YES</td>
</tr>
<tr>
<td><code>checkout [commit] &lt;paths&gt;</code></td>
<td style="text-align:center">NO</td>
<td style="text-align:center">YES</td>
<td style="text-align:center">YES</td>
<td style="text-align:center"><strong>NO</strong></td>
</tr>
</tbody>
</table>
<h3 id="cherry-pick">
  Cherry Pick
  <a href="#cherry-pick" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Cherry pick commit a1b2c3d in the current branch</span>
</span></span><span style="display:flex;"><span>git cherry-pick a1b2c3d
</span></span></code></pre></div><h3 id="revert">
  Revert
  <a href="#revert" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Revert changes made by the commit a1b2c3d</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This is the compliment of cherry-pick</span>
</span></span><span style="display:flex;"><span>git revert a1b2c3d
</span></span></code></pre></div><h3 id="merge">
  Merge
  <a href="#merge" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><code>MERGE_HEAD</code> points to the head of the source branch that we are
merging into our destination branch.</p>
<p><code>ORIG_HEAD</code> is created by commands that move your HEAD in a drastic
way, to record the position of the HEAD before their operation, so that
you can easily change the tip of the branch back to the state before
you ran them.</p>
<p><code>Fast Forward Merge</code> happens when the source branch contains all of the
commits from the destination branch.</p>
<p><strong>Note</strong> — <em>A merge commit has 2 parents.</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Merge dev branch into current branch</span>
</span></span><span style="display:flex;"><span>git merge dev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># For all the files with conflicts select our version rather than theirs</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># For all the files without conflicts merge both versions</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># e.g. - Xours, Xtheirs</span>
</span></span><span style="display:flex;"><span>git merge -Xours dev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Fake merge</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Merge dev into current branch, and shamelessly ignore the changes</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># made in the dev branch</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># e.g. - ours, theirs</span>
</span></span><span style="display:flex;"><span>git merge -s ours dev
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This can often be useful to basically trick Git into thinking that a</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># branch is already merged when doing a merge later on. For example,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># say you branched off a release branch and have done some work on it</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># that you will want to merge back into your master branch at some</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># point. In the meantime some bugfix on master needs to be backported</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># into your release branch. You can merge the bugfix branch into the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># release branch and also merge -s ours the same branch into your</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># master branch (even though the fix is already there) so when you</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># later merge the release branch again, there are no conflicts from the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># bugfix.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Abort a merge</span>
</span></span><span style="display:flex;"><span>git merge --abort
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This might not work if you had unstashed, uncommitted changes in your</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># working directory when you ran it</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Always stash before merging</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Reject merge if the commits in the remote branch are not signed</span>
</span></span><span style="display:flex;"><span>git merge --verify-signatures non-verify
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Merge if the commits in the remote branch are signed</span>
</span></span><span style="display:flex;"><span>git merge --verify-signatures signed-branch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Merge and sign the resulting merge commit if the commits</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># in the remote branch are signed</span>
</span></span><span style="display:flex;"><span>git merge --verify-signatures -S signed-branch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Conflicts</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Re-Checkout the file again and replace the merge conflict markers</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Useful if you want to reset the markers and try to resolve them again</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># e.g. - diff3 (for common ancestor file), merge (default)</span>
</span></span><span style="display:flex;"><span>git checkout --conflict<span style="color:#f92672">=</span>diff3 hello.rb
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List commits unique to HEAD, and MERGE_HEAD</span>
</span></span><span style="display:flex;"><span>git log --oneline --left-right HEAD...MERGE_HEAD
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List commits on either side of merge which are causing conflicts</span>
</span></span><span style="display:flex;"><span>git log --oneline --left-right --merge
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List common_ancestor..LO</span>
</span></span><span style="display:flex;"><span>git diff --ours
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List common_ancestor..RE</span>
</span></span><span style="display:flex;"><span>git diff --theirs
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Show how a merge conflict was resolved</span>
</span></span><span style="display:flex;"><span>git log --cc -p
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Check the patches in its output</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List the SHA1 hashes of the git blobs of the files during merging</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Merging creates 3 files - common ancestor, LO (ours), RE (theirs)</span>
</span></span><span style="display:flex;"><span>git ls-files -u
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; 100644 8baef1b4abc478178b004d62031cf7fe6db6f903 1	hello.rb (common)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; 100644 79dc3eeea3f4fb9bf81661dcff917ca4706c386f 2	hello.rb (ours)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; 100644 cd470e619003f5e55999473fec485d85a8601e44 3	hello.rb (theirs)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Access the contents of these blobs</span>
</span></span><span style="display:flex;"><span>git show :1:hello.rb &gt; hello.common.rb
</span></span><span style="display:flex;"><span>git show :2:hello.rb &gt; hello.ours.rb
</span></span><span style="display:flex;"><span>git show :3:hello.rb &gt; hello.theirs.rb
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># During a merge conflict on hello.rb, keep our version</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># e.g. ours, theirs, union</span>
</span></span><span style="display:flex;"><span>git merge-file -p <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    hello.ours.rb hello.common.rb hello.theirs.rb &gt; hello.rb
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Combined diff format - How diff looks on resolving a conflict</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/book/en/v2/Git-Tools-Advanced-Merging#_combined_diff_format</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Perils of reverting a merge commit using git revert</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/book/en/v2/Git-Tools-Advanced-Merging#_reverse_commit</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Subtree merge</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/book/en/v2/Git-Tools-Advanced-Merging#_subtree_merge</span>
</span></span></code></pre></div><h3 id="rebase">
  Rebase
  <a href="#rebase" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><code>git checkout serverfix</code></p>
<p><code>git rebase master</code></p>
<p>This operation works by going to the common ancestor of the two
branches (the one you’re on (serverfix) and the one you’re rebasing
onto (master)), getting the diff introduced by each commit of the
branch you’re on, saving those diffs to temporary files, resetting the
current branch to the same commit as the branch you are rebasing onto,
and finally applying each change in turn.</p>
<p>When the rebase is complete, you can merge the serverfix branch on
master.</p>
<p><code>git checkout master</code></p>
<p><code>git merge serverfix</code></p>
<p>It will be a fast-forward merge.</p>
<p>Interactive rebasing <code>git rebase -i</code> comes with the following options &mdash;</p>
<ul>
<li><code>p, pick &lt;commit&gt;</code> use commit</li>
<li><code>r, reword &lt;commit&gt;</code> use commit, but edit the commit message</li>
<li><code>e, edit &lt;commit&gt;</code> use commit, but stop for amending</li>
<li><code>s, squash &lt;commit&gt;</code> use commit, but meld into previous commit</li>
<li><code>f, fixup &lt;commit&gt;</code> like &ldquo;squash&rdquo;, but discard this commit&rsquo;s log message</li>
<li><code>x, exec &lt;command&gt;</code> run command (the rest of the line) using shell</li>
<li><code>b, break</code> stop here (continue rebase later with &lsquo;git rebase &ndash;continue&rsquo;)</li>
<li><code>d, drop &lt;commit&gt;</code> remove commit</li>
<li><code>l, label &lt;label&gt;</code> label current HEAD with a name</li>
<li><code>t, reset &lt;label&gt;</code> reset HEAD to a label</li>
<li><code>m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</code>
create a merge commit using the original merge commit&rsquo;s
message (or the oneline, if no original merge commit was
specified). Use -c &lt;commit&gt; to reword the commit message.</li>
</ul>
<p><strong>Note</strong> — <em>Always rebase your feature branch on the remote branch
before opening a pull request.</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Interactive rebase</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Rewrite the last 3 commits</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># HEAD~3 will not be modified beacuse it&#39;s the 4th commit</span>
</span></span><span style="display:flex;"><span>git rebase -i HEAD~3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Rebase current branch on master</span>
</span></span><span style="display:flex;"><span>git rebase master
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Rebase dev branch on master</span>
</span></span><span style="display:flex;"><span>git rebase master dev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If you face conflicts, resolve them and run</span>
</span></span><span style="display:flex;"><span>git rebase --continue
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Abort a rebase</span>
</span></span><span style="display:flex;"><span>git rebase --abort
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># More interesting rebases</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Rebase only client changes onto the master branch</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/book/en/v2/Git-Branching-Rebasing#_more_interesting_rebases</span>
</span></span><span style="display:flex;"><span>git rebase --onto master server client
</span></span></code></pre></div><h4 id="rebase-hell">
  Rebase Hell
  <a href="#rebase-hell" class="h-anchor" aria-hidden="true">#</a>
</h4>
<p>Always rebase your local branches. Never rebase any changes/commits
which have been shared with other developers and they might have
started working on top of it.</p>
<blockquote>
<p><em>Otherwise, a special room shall be booked for thou in hell.</em></p>
</blockquote>
<p>If you still do this montrosity, it&rsquo;ll be very difficult to merge any
changes and keep track of everything. It&rsquo;ll be nothing less than a
disaster.</p>
<h3 id="rebase-vs-merge">
  Rebase vs Merge
  <a href="#rebase-vs-merge" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><code>Merge</code> - If you want to record all the evidence of everything that
happened during the project development, go for merge. It’s a
historical document, valuable in its own right, and shouldn’t be
tampered with. From this angle, changing the commit history is almost
blasphemous; you’re lying about what actually transpired. So what if
there was a messy series of merge commits? That’s how it happened,
and the repository should preserve that for posterity.</p>
<p><code>Rebase</code> - If you want to tell a story of how your project was made,
go for rebase. You wouldn’t publish the first draft of a book, and
the manual for how to maintain your software deserves careful editing.
This is the camp that uses tools like <code>rebase</code> and <code>filter-branch</code> to
tell the story in the way that’s best for future readers.</p>
<h3 id="submodules">
  Submodules
  <a href="#submodules" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">https://git-scm.com/book/en/v2/Git-Tools-Submodules</a></p>
<p>Submodules allow you to keep a Git repository as a subdirectory of
another Git repository. This lets you clone another repository into
your project and keep your commits separate.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Add a new submodule</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Creates a new entry in .gitmodules</span>
</span></span><span style="display:flex;"><span>git submodule add https://github.com/musq/git-park
</span></span><span style="display:flex;"><span><span style="color:#75715e"># DO NOT use private URLs in submodules of public projects, because</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># it might not be accessible to other people</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># When cloning a repo, run these two to fetch the submodules&#39; contents</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Initialize your local configuration file</span>
</span></span><span style="display:flex;"><span>git submodule init
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Fetch all the data from the submodules&#39; repo and check out the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># appropriate commit listed in your superproject</span>
</span></span><span style="display:flex;"><span>git submodule update
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Or, run this one step instead</span>
</span></span><span style="display:flex;"><span>git clone --recurse-submodules https://github.com/musq/git-park
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Update all submodules</span>
</span></span><span style="display:flex;"><span>git submodule update --remote
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Update only the git-park submodule</span>
</span></span><span style="display:flex;"><span>git submodule update --remote git-park
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This command will by default assume that you want to update the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># checkout to the master branch of the submodule repository</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># To change the default branch, set .gitmodules by running</span>
</span></span><span style="display:flex;"><span>git config -f .gitmodules submodule.git-park.branch serverfix
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This command updates the .gitmodules so that everyone tracks it</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If you want to keep these changes local, store in the .git/config file</span>
</span></span><span style="display:flex;"><span>git config submodule.git-park.branch serverfix
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List the commits introduced in submodules as difference</span>
</span></span><span style="display:flex;"><span>git diff --submodule
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set global config</span>
</span></span><span style="display:flex;"><span>git config --global diff.submodule log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set config to view changes in git status</span>
</span></span><span style="display:flex;"><span>git config status.submodulesummary <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># See submodule changes in git log</span>
</span></span><span style="display:flex;"><span>git log -p --submodule
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Working on a submodule</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/book/en/v2/Git-Tools-Submodules#_working_on_a_submodule</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If you have made changes in your submodules locally</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># (committed or uncommitted), run</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Merge your changes with remote that was set up for this submodule</span>
</span></span><span style="display:flex;"><span>git submodule update --remote --merge
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Rebase your changes with remote that was set up for this submodule</span>
</span></span><span style="display:flex;"><span>git submodule update --remote --rebase
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Update without merging</span>
</span></span><span style="display:flex;"><span>git submodule update --remote
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Running this will update the submodule to whatever is on the server</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># and reset your project to a detached HEAD state.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If you have committed changes in submodules, then you can simply go</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># back into the directory and check out your branch again (which will</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># still contain your work) and merge or rebase origin/stable (or</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># whatever remote branch you want) manually.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If you haven’t committed your changes in your submodule and you run</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># a submodule update that would cause issues, Git will fetch the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># changes but not overwrite unsaved work in your submodule directory.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If you made changes that conflict with something changed upstream,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Git will let you know when you run the update.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># You can go into the submodule directory and fix the conflict just as</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># you normally would.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Push submodule changes</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Fail superproject push if any of the committed submodule</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># changes hasn&#39;t been pushed</span>
</span></span><span style="display:flex;"><span>git push --recurse-submodules<span style="color:#f92672">=</span>check
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Push all the submodule changes to their remotes before</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># pushing superproject</span>
</span></span><span style="display:flex;"><span>git push --recurse-submodules<span style="color:#f92672">=</span>on-demand
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set git to ask you if you want to push the submodule changes</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># when you&#39;re pushing the superproject</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># e.g. check, on-demand</span>
</span></span><span style="display:flex;"><span>git config push.recurseSubmodules check
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Merge submodule changes conflict</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/book/en/v2/Git-Tools-Submodules#_merging_submodule_changes</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Submodule foreach</span>
</span></span><span style="display:flex;"><span>git submodule foreach <span style="color:#e6db74">&#39;git fetch &amp;&amp; git merge origin/master&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get difference of superproject and all its submodules</span>
</span></span><span style="display:flex;"><span>git diff; git submodule foreach <span style="color:#e6db74">&#39;git diff&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Submodule aliases</span>
</span></span><span style="display:flex;"><span>git config alias.sdiff <span style="color:#e6db74">&#39;!&#39;</span><span style="color:#e6db74">&#34;git diff &amp;&amp; git submodule foreach &#39;git diff&#39;&#34;</span>
</span></span><span style="display:flex;"><span>git config alias.spush <span style="color:#e6db74">&#39;push --recurse-submodules=on-demand&#39;</span>
</span></span><span style="display:flex;"><span>git config alias.supdate <span style="color:#e6db74">&#39;submodule update --remote --merge&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Submodule issues</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/book/en/v2/Git-Tools-Submodules#_issues_with_submodules</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<h2 id="debugging">
  Debugging
  <a href="#debugging" class="h-anchor" aria-hidden="true">#</a>
</h2>
<hr>
<h3 id="blame">
  Blame
  <a href="#blame" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>List the commits that last modified each line in a file.</p>
<p>Ocassionally when you&rsquo;re tracking a bug, you&rsquo;ll close in on a line in
a file as the source of the bug. In this case Blame helps by telling
you which commit last modified this line and possibly introduced
the bug.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># List committers of Makefile from line 69-82</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/book/en/v2/Git-Tools-Debugging-with-Git#_file_annotation</span>
</span></span><span style="display:flex;"><span>git blame -L 69,82 Makefile
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If any line in its output begins with ^ (e.g. ^a1b2c3d), it</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># means these lines haven&#39;t changed since their first commit</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List the context as well</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Git analyzes the file you’re annotating and tries to figure out where</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># snippets of code within it originally came from if they were copied</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># from elsewhere</span>
</span></span><span style="display:flex;"><span>git blame -C -L 69,82 Makefile
</span></span></code></pre></div><h3 id="bisect">
  Bisect
  <a href="#bisect" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>Find the commit that introduced a bug, using a binary search.</p>
<p>Run <code>git bisect start</code> to begin bisecting. Tell git about a commit that
definitely contains the bug using <code>git bisect bad bad-commit</code>. Then
tell git about a commit that definitely does not contain the bug using
<code>git bisect good good-commit</code>. Git will reset you HEAD to the middle
of these two commits (binary search). Run your tests and determine if
the bug exists at this point. If it does, tell git using
<code>git bisect bad</code>, otherwise do <code>git bisect good</code>. Git will then reset
the HEAD to the middle of the next set of bad and good commits. You&rsquo;ll
iterate these steps till Git reaches the final suspected commit. At the
end, Git will tell you which commit introduced the bug.</p>
<p>Don&rsquo;t forget to exit bisect mode by running <code>git bisect reset</code> when
it&rsquo;s over.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Begin bisecting</span>
</span></span><span style="display:flex;"><span>git bisect start
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># We know for certain that commit a1b2c3d contains the bug</span>
</span></span><span style="display:flex;"><span>git bisect bad a1b2c3d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># We know for certain that tag v1.9.2 doesn&#39;t contain the bug</span>
</span></span><span style="display:flex;"><span>git bisect good v1.9.2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># For each iteration, tell git if the bug is present or not</span>
</span></span><span style="display:flex;"><span>git bisect good
</span></span><span style="display:flex;"><span><span style="color:#75715e"># or</span>
</span></span><span style="display:flex;"><span>git bisect bad
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># When you&#39;re finished, reset your HEAD by</span>
</span></span><span style="display:flex;"><span>git bisect reset
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># To automate this using a script</span>
</span></span><span style="display:flex;"><span>git bisect start bad-commit good-commit
</span></span><span style="display:flex;"><span>git bisect run test-error.sh
</span></span><span style="display:flex;"><span><span style="color:#75715e"># test-error.sh must be set up to return exit 0 on success,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># and non-zero on fail</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<h2 id="tools">
  Tools
  <a href="#tools" class="h-anchor" aria-hidden="true">#</a>
</h2>
<hr>
<h3 id="git-desktop">
  Git Desktop
  <a href="#git-desktop" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># View git logs in a desktop app, comes pre-installed with git</span>
</span></span><span style="display:flex;"><span>gitk
</span></span></code></pre></div><h3 id="git-gui">
  Git GUI
  <a href="#git-gui" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Write commit messages in a Graphical User Interface</span>
</span></span><span style="display:flex;"><span>git gui
</span></span></code></pre></div><h3 id="git-web">
  Git Web
  <a href="#git-web" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># View git logs in browser</span>
</span></span><span style="display:flex;"><span>git instaweb --httpd<span style="color:#f92672">=</span>webrick
</span></span></code></pre></div><h3 id="credentials">
  Credentials
  <a href="#credentials" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Enable caching of credentials</span>
</span></span><span style="display:flex;"><span>git config --global credential.helper cache
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set file to which credentials should be stored</span>
</span></span><span style="display:flex;"><span>git config --global credential.helper <span style="color:#e6db74">&#39;store --file ~/.git-credentials&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set timeout to 1 hour</span>
</span></span><span style="display:flex;"><span>git config --global credential.helper <span style="color:#e6db74">&#39;cache --timeout 3600&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># How it works</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/book/en/v2/Git-Tools-Credential-Storage#_under_the_hood</span>
</span></span></code></pre></div><h3 id="rerere-reuse-recorded-resolution">
  Rerere (reuse recorded resolution)
  <a href="#rerere-reuse-recorded-resolution" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><a href="https://git-scm.com/book/en/v2/Git-Tools-Rerere">https://git-scm.com/book/en/v2/Git-Tools-Rerere</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># When rerere is enabled, Git will keep a set of pre- and post-images</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># from successful merges, and if it notices that there’s a conflict</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># that looks exactly like one you’ve already fixed, it’ll just use</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># the fix from last time, without bothering you with it.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Enable rerere in config</span>
</span></span><span style="display:flex;"><span>git config --global rerere.enabled true
</span></span></code></pre></div><h3 id="reflog">
  Reflog
  <a href="#reflog" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>Git silently records what your HEAD is every time you change it.
Each time you commit or change branches, the reflog is updated
using the <code>git update-ref</code> command.</p>
<p>All the contents are stored in <code>.git/logs/*</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># A log of where your HEAD and branch references have been for the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># last few months</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This is stored locally, and not synced on remote</span>
</span></span><span style="display:flex;"><span>git reflog
</span></span></code></pre></div><h3 id="filter-branch">
  Filter-branch
  <a href="#filter-branch" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>Rewrite history in bulk.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Remove the password.txt file from all the commits</span>
</span></span><span style="display:flex;"><span>git filter-branch --tree-filter <span style="color:#e6db74">&#39;rm -f passwords.txt&#39;</span> HEAD
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Change email in git commits</span>
</span></span><span style="display:flex;"><span>git filter-branch --commit-filter <span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	if [ &#34;$GIT_AUTHOR_EMAIL&#34; = &#34;ashish@localhost&#34; ];
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		GIT_AUTHOR_NAME=&#34;Ashish Ranjan&#34;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		GIT_AUTHOR_EMAIL=&#34;ashish@example.com&#34;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		git commit-tree &#34;$@&#34;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	else
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">		git commit-tree &#34;$@&#34;;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">	fi&#39;</span> HEAD
</span></span></code></pre></div><h3 id="bundle">
  Bundle
  <a href="#bundle" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><a href="https://git-scm.com/book/en/v2/Git-Tools-Bundling">https://git-scm.com/book/en/v2/Git-Tools-Bundling</a></p>
<h3 id="replace">
  Replace
  <a href="#replace" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><a href="https://git-scm.com/book/en/v2/Git-Tools-Replace">https://git-scm.com/book/en/v2/Git-Tools-Replace</a></p>
<h3 id="rev-parse">
  Rev parse
  <a href="#rev-parse" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Show the commit hash of master branch</span>
</span></span><span style="display:flex;"><span>git rev-parse master
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; d81dc9b1f83cccec24e12113aa471b736cd14d29</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<h2 id="personalization">
  Personalization
  <a href="#personalization" class="h-anchor" aria-hidden="true">#</a>
</h2>
<hr>
<h3 id="attributes">
  Attributes
  <a href="#attributes" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>Some of the config settings can also be specified for a path, so that
Git applies those settings only for a subdirectory or subset of files.
These path-specific settings are called Git attributes and are set
either in a <code>.gitattributes</code> file in one of your directories (normally
the root of your project) or in the <code>.git/info/attributes</code> file if you
don’t want the attributes file committed with your project.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Treat *.dat files as binary</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Git will not try to compute or print a diff for changes in this file</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># when you run git show or git diff</span>
</span></span><span style="display:flex;"><span>*.dat binary
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Use gpg to run diff on gpg files</span>
</span></span><span style="display:flex;"><span>*.gpg diff<span style="color:#f92672">=</span>gpg
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Run diff on png files with the exif option in gitconfig</span>
</span></span><span style="display:flex;"><span>*.png diff<span style="color:#f92672">=</span>exif
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Specify the exiftool for exif data</span>
</span></span><span style="display:flex;"><span>git config diff.exif.textconv exiftool
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Ignore test directory on exporting the project as archive</span>
</span></span><span style="display:flex;"><span>test/ export-ignore
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># On merging, use our version of database.xml</span>
</span></span><span style="display:flex;"><span>database.xml merge<span style="color:#f92672">=</span>ours
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Define a dummy ours strategy</span>
</span></span><span style="display:flex;"><span>git config --global merge.ours.driver true
</span></span></code></pre></div><h3 id="refspec">
  Refspec
  <a href="#refspec" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>Reference specifications can help you harness the full power of remotes.</p>
<p>When you add a new remote, it is stored in <code>.git/config</code>.
The format of the refspec is, first, an optional <code>+</code>, followed by
<code>&lt;src&gt;:&lt;dst&gt;</code>, where <code>&lt;src&gt;</code> is the pattern for references on the
remote side and <code>&lt;dst&gt;</code> is where those references will be tracked
locally. The <code>+</code> tells Git to update the reference even if it isn’t
a fast-forward.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># See what&#39;s inside .git/config</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; [remote &#34;origin&#34;]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt;     url = https://github.com/musq/dotfiles</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt;	    fetch = +refs/heads/*:refs/remotes/origin/*</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List commits in origin/master</span>
</span></span><span style="display:flex;"><span>git log origin/master
</span></span><span style="display:flex;"><span>git log remotes/origin/master
</span></span><span style="display:flex;"><span>git log refs/remotes/origin/master
</span></span><span style="display:flex;"><span><span style="color:#75715e"># They’re all equivalent, because Git expands each of them to</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># refs/remotes/origin/master.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Partial globs are invalid in refspec</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The following is invalid</span>
</span></span><span style="display:flex;"><span>fetch <span style="color:#f92672">=</span> +refs/heads/qa*:refs/remotes/origin/qa*
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># However, namespaces are allowed</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The following is valid</span>
</span></span><span style="display:flex;"><span>fetch <span style="color:#f92672">=</span> +refs/heads/qa/*:refs/remotes/origin/qa/*
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Push refspec</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Consider a project with the following in .git/config. There are two</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># local branches - master, dev.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; [remote &#34;origin&#34;]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt;     url = https://github.com/musq/dotfiles</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt;     fetch = +refs/heads/*:refs/remotes/origin/*</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt;     push = refs/heads/dev:refs/heads/qa/dev-o</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; [remote &#34;upstream&#34;]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt;     url = https://github.com/musq/dotfiles</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt;     fetch = +refs/heads/*:refs/remotes/upstream/*</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt;     push = refs/heads/dev:refs/heads/qa/dev-u</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># There are two push refspecs defined for refs/heads/dev.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Consider the following two situations (you&#39;re on master) -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git push origin master <span style="color:#75715e"># pushes local master branch to origin/master</span>
</span></span><span style="display:flex;"><span>git push <span style="color:#75715e"># (NOT SURE) most probably pushes to the first matching refspec</span>
</span></span><span style="display:flex;"><span>git push origin dev <span style="color:#75715e"># pushes local dev branch to origin/qa/dev-o</span>
</span></span><span style="display:flex;"><span>git push upstream dev <span style="color:#75715e"># pushes local dev branch to upstream/qa/dev-u</span>
</span></span></code></pre></div><h3 id="hooks">
  Hooks
  <a href="#hooks" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks</a></p>
<p>Git has a way to fire off custom scripts when certain important actions
occur. There are two groups of these hooks: <code>client-side</code> and
<code>server-side</code>. Client-side hooks are triggered by operations such as
committing and merging, while server-side hooks run on network
operations such as receiving pushed commits. There are following types
of <strong>client hooks</strong> &mdash;</p>
<h4 id="commit-hooks">
  Commit hooks
  <a href="#commit-hooks" class="h-anchor" aria-hidden="true">#</a>
</h4>
<ul>
<li>
<p><code>pre-commit</code> - Runs before you even type in a commit message. It’s
used to inspect the snapshot that’s about to be committed, to see if
you’ve forgotten something, to make sure tests run, or to examine
whatever you need to inspect in the code.</p>
</li>
<li>
<p><code>prepare-commit-msg</code> - Runs before the commit message editor is fired
up but after the default message is created. It lets you edit the
default message before the commit author sees it.</p>
</li>
<li>
<p><code>commit-msg</code> - Takes one parameter, which again is the path to a
temporary file that contains the commit message written by the
developer. You can use it to validate your project state or commit
message before allowing a commit to go through.</p>
</li>
<li>
<p><code>post-commit</code> - Runs After the entire commit process is completed.
Generally, this script is used for notification or something similar.</p>
</li>
</ul>
<h4 id="email-hooks">
  Email hooks
  <a href="#email-hooks" class="h-anchor" aria-hidden="true">#</a>
</h4>
<ul>
<li>
<p><code>pre-applypatch</code> - Runs after the patch is applied but before a commit
is made, so you can use it to inspect the snapshot before making the
commit. You can run tests or otherwise inspect the working tree with
this script.</p>
</li>
<li>
<p><code>applypatch-msg</code> - Takes a single argument: the name of the temporary
file that contains the proposed commit message. use this to make sure a
commit message is properly formatted, or to normalize the message by
having the script edit it in place.</p>
</li>
<li>
<p><code>post-applypatch</code> - Runs after the commit is made. You can use it to
notify a group or the author of the patch you pulled in that you’ve
done so. You can’t stop the patching process with this script.</p>
</li>
</ul>
<h4 id="other-hooks">
  Other hooks
  <a href="#other-hooks" class="h-anchor" aria-hidden="true">#</a>
</h4>
<ul>
<li>
<p><code>pre-rebase</code> - Runs before you rebase anything and can halt the
process by exiting non-zero. You can use this hook to disallow rebasing
any commits that have already been pushed.</p>
</li>
<li>
<p><code>post-rewrite</code> - Run by commands that replace commits, such as git
commit &ndash;amend and git rebase (though not by git filter-branch). Its
single argument is which command triggered the rewrite, and it receives
a list of rewrites on stdin. This hook has many of the same uses as the
post-checkout and post-merge hooks.</p>
</li>
<li>
<p><code>post-checkout</code> - Runs after a successful git checkout. you can use
it to set up your working directory properly for your project
environment. This may mean moving in large binary files that you don’t
want source controlled, auto-generating documentation, or something
along those lines.</p>
</li>
<li>
<p><code>post-merge</code> - Runs after a successful merge command. You can use it
to restore data in the working tree that Git can’t track, such as
permissions data. This hook can likewise validate the presence of files
external to Git control that you may want copied in when the working
tree changes.</p>
</li>
<li>
<p><code>pre-push</code> - Runs during git push, after the remote refs have been
updated but before any objects have been transferred. It receives the
name and location of the remote as parameters, and a list of
to-be-updated refs through stdin. You can use it to validate a set of
ref updates before a push occurs (a non-zero exit code will abort the
push).</p>
</li>
<li>
<p><code>pre-auto-gc</code> - Invoked just before the garbage collection takes
place, and can be used to notify you that this is happening, or to
abort the collection if now isn’t a good time.</p>
</li>
</ul>
<!-- raw HTML omitted -->
<h2 id="workflows">
  Workflows
  <a href="#workflows" class="h-anchor" aria-hidden="true">#</a>
</h2>
<hr>
<p>Git makes it extremely easy to merge changes from multiple developers.
This can be made even more convenient by following a project specific
standard for both types of users:</p>
<ol>
<li>Contributors</li>
<li>Owners/Maintainers</li>
</ol>
<h3 id="contributors">
  Contributors
  <a href="#contributors" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>As a contributor, you must follow the contributing guidelines (e.g.
<code>Contributing.md</code>) as mentioned in the corresponding projects. If you
can&rsquo;t find any such guidelines for the project, please follow these:</p>
<ul>
<li>Use
<a href="https://www.conventionalcommits.org/en/v1.0.0-beta.4/">conventional-commits</a>
to format commit messages</li>
<li>Never commit trailing whitespaces</li>
<li>Don&rsquo;t keep an empty line at the end of your file</li>
<li>Always rebase your branch on target branch before creating a Pull
Request</li>
</ul>
<h4 id="generate-pull-request-template">
  Generate pull request template
  <a href="#generate-pull-request-template" class="h-anchor" aria-hidden="true">#</a>
</h4>
<p><code>git request-pull [-p] &lt;start&gt; &lt;url&gt; [&lt;end&gt;]</code></p>
<p>The git request-pull command takes the base branch <!-- raw HTML omitted --> into which
you want your dev branch <!-- raw HTML omitted --> pulled and the Git repository URL <!-- raw HTML omitted -->
you want them to pull from, and produces a summary of all the changes
you’re asking to be pulled.</p>
<p>This summary can be emailed to the owner of the upstream repo.</p>
<p><strong>Note</strong> — <em>This command does not modify anything.</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Generate a request asking your upstream project to pull changes into</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># their tree. The request, printed to the standard output, begins with</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># the branch description, summarizes the changes and indicates from</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># where they can be pulled.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The upstream project is expected to have the commit named by &lt;start&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># and the output asks it to integrate the changes you made since that</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># commit, up to the commit named by &lt;end&gt;, by visiting the repository</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># named by &lt;url&gt;.</span>
</span></span><span style="display:flex;"><span>git request-pull upstream/master https://github.com/musq/dotfiles dev
</span></span><span style="display:flex;"><span><span style="color:#75715e"># upstream/master - upstream branch</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># dev - local development branch</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># There must be a branch named dev on the repo in the provided URL,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># and it must be identical to your local dev branch</span>
</span></span></code></pre></div><h4 id="send-commit-patches-via-email">
  Send commit patches via email
  <a href="#send-commit-patches-via-email" class="h-anchor" aria-hidden="true">#</a>
</h4>
<p><a href="https://git-scm.com/book/en/v2/Distributed-Git-Contributing-to-a-Project#_project_over_email">https://git-scm.com/book/en/v2/Distributed-Git-Contributing-to-a-Project#_project_over_email</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Generate patches from commits since upstream/master upto</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># current branch</span>
</span></span><span style="display:flex;"><span>git format-patch -M upstream/master
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The format-patch command prints out the names of the patch files it</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># creates.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The -M switch tells Git to look for renames.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set up IMAP in .git/config</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>imap<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  folder <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;[Gmail]/Drafts&#34;</span>
</span></span><span style="display:flex;"><span>  host <span style="color:#f92672">=</span> imaps://imap.gmail.com
</span></span><span style="display:flex;"><span>  user <span style="color:#f92672">=</span> user@gmail.com
</span></span><span style="display:flex;"><span>  pass <span style="color:#f92672">=</span> YX<span style="color:#f92672">]</span>8g76G_2^sFbd
</span></span><span style="display:flex;"><span>  port <span style="color:#f92672">=</span> <span style="color:#ae81ff">993</span>
</span></span><span style="display:flex;"><span>  sslverify <span style="color:#f92672">=</span> false
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If your IMAP server doesn’t use SSL, the last two lines probably</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># aren’t necessary, and the host value will be imap:// instead of</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># imaps://. When that is set up, you can use git imap-send to place</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># the patch series in the Drafts folder of the specified IMAP server:</span>
</span></span><span style="display:flex;"><span>cat *.patch | git imap-send
</span></span><span style="display:flex;"><span><span style="color:#75715e"># At this point, you should be able to go to your Drafts folder,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># change the To field to the mailing list you’re sending the patch to,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># possibly CC the maintainer or person responsible for that section,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># and send it off.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># You can also send the patches through an SMTP server.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set up sendmail SMTP in .git/config</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>sendemail<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>  smtpencryption <span style="color:#f92672">=</span> tls
</span></span><span style="display:flex;"><span>  smtpserver <span style="color:#f92672">=</span> smtp.gmail.com
</span></span><span style="display:flex;"><span>  smtpuser <span style="color:#f92672">=</span> user@gmail.com
</span></span><span style="display:flex;"><span>  smtpserverport <span style="color:#f92672">=</span> <span style="color:#ae81ff">587</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># After this is done, you can use git send-email to send your patches:</span>
</span></span><span style="display:flex;"><span>git send-email *.patch
</span></span><span style="display:flex;"><span><span style="color:#75715e"># It will now ask you to provide the recipient of this email</span>
</span></span></code></pre></div><h4 id="create-pull-requests-on-github">
  Create pull requests on GitHub
  <a href="#create-pull-requests-on-github" class="h-anchor" aria-hidden="true">#</a>
</h4>
<p>You can use GitHub web user interface to create and manage pull
requests.</p>
<blockquote>
<p><em>GitHub pull requests are essentially issues.</em></p>
</blockquote>
<ul>
<li>
<p><a href="https://github.com/musq/dotfiles/pull/6">https://github.com/musq/dotfiles/pull/6</a> redirects to
<a href="https://github.com/musq/dotfiles/issues/6">https://github.com/musq/dotfiles/issues/6</a></p>
</li>
<li>
<p><a href="https://github.com/musq/dotfiles/issues/21">https://github.com/musq/dotfiles/issues/21</a> redirects to
<a href="https://github.com/musq/dotfiles/pull/21">https://github.com/musq/dotfiles/pull/21</a></p>
</li>
</ul>
<p>You can reference other issues/pull-request by their number on a
GitHub pull request page using:</p>
<ul>
<li><code>#&lt;num&gt;</code> - refer to issue in the current repository</li>
<li><code>username#&lt;num&gt;</code> - refer to issue in a fork of this repository</li>
<li><code>username/repo#&lt;num&gt;</code> - refer to issue in another repository</li>
</ul>
<h3 id="ownersmaintainers">
  Owners/Maintainers
  <a href="#ownersmaintainers" class="h-anchor" aria-hidden="true">#</a>
</h3>
<ul>
<li>Always make sure your project has a license as the first commit before
any other code</li>
</ul>
<p>Whether you maintain a canonical repository or want to help by
verifying or approving patches, you need to know how to accept work
in a way that is the clearest for other contributors and sustainable by
you over the long run.
This can consist of accepting and applying patches emailed to you, or
integrating changes in remote branches for repositories you’ve added
as remotes to your project.</p>
<p>You should choose one of the following workflows:</p>
<ol>
<li>
<p><code>Centralized</code> - One central hub, or repository, can accept code, and
everyone synchronizes their work with it. A number of developers (all
have push access to this repo) are nodes, and synchronize their changes
with it.</p>
</li>
<li>
<p><code>Integration-Manager</code> - One user (owner) with push access. Other
contributors fork the upstream repo, make changes, and create a pull
request (PR) for their changes. The owner can merge/reject this PR.</p>
</li>
<li>
<p><code>Dictator and Lieutenants</code> - Multiple integration managers
(lieutenants) are in charge of certain parts of repository. They review
PRs for their teritorry. All the lieutenants have one integration
manager known as the benevolent dictator (BD). The dictator merges all
these changes into his master branch from which other collaborators
must pull.
The dictator has the final say for which features will go in which
release.
Useful for very big public repositories.
e.g. Linus Torvalds is BD of linux kernel, Bram Moolenaar is BD of vim</p>
</li>
</ol>
<h4 id="merge-patches-from-email">
  Merge patches from email
  <a href="#merge-patches-from-email" class="h-anchor" aria-hidden="true">#</a>
</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Check if a patch applies cleanly before actually applying it</span>
</span></span><span style="display:flex;"><span>git apply --check 0001-first-commit.patch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Apply the patch</span>
</span></span><span style="display:flex;"><span>git apply 0001-first-commit.patch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Apply a series of patches from a mailbox</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If someone has emailed you the patch properly using git send-email,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># and you download that into an mbox format, then you can point git am</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># to that mbox file, and it will start applying all the patches it sees.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If you run a mail client that can save several emails out in mbox</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># format, you can save entire patch series into a file and then use</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># git am to apply them one at a time.</span>
</span></span><span style="display:flex;"><span>git am
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Apply a patch using am (apply-mail)</span>
</span></span><span style="display:flex;"><span>git am 0001-first-commit.patch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Tell git-am to merge smartly using a three-way-merge</span>
</span></span><span style="display:flex;"><span>git am -3 0001-first-commit.patch
</span></span></code></pre></div><h4 id="merge-pull-requests-on-github">
  Merge pull requests on GitHub
  <a href="#merge-pull-requests-on-github" class="h-anchor" aria-hidden="true">#</a>
</h4>
<p>Go to the page of the pull request on GitHub, and merge it using the
green <code>Merge</code> button.</p>
<h4 id="merge-github-pull-requests-locally----">
  Merge GitHub pull requests locally &mdash;
  <a href="#merge-github-pull-requests-locally----" class="h-anchor" aria-hidden="true">#</a>
</h4>
<h4 id="1-using-pull-request-patches">
  1. Using pull request patches
  <a href="#1-using-pull-request-patches" class="h-anchor" aria-hidden="true">#</a>
</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># This will directly merge the patch into the current branch</span>
</span></span><span style="display:flex;"><span>curl https://github.com/musq/dotfiles/pull/21.patch | git am
</span></span></code></pre></div><h4 id="2-using-pull-request-refs">
  2. Using pull request refs
  <a href="#2-using-pull-request-refs" class="h-anchor" aria-hidden="true">#</a>
</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/book/en/v2/GitHub-Maintaining-a-Project#_pr_refs</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List all the raw references on the remote</span>
</span></span><span style="display:flex;"><span>git ls-remote https://github.com/musq/dotfiles
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; 10d539600d86723087810ec636870a504f4fee4d	HEAD</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; 10d539600d86723087810ec636870a504f4fee4d	refs/heads/master</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; 6a83107c62950be9453aac297bb0193fd743cd6e	refs/pull/1/head</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; afe83c2d1a70674c9505cc1d8b7d380d5e076ed3	refs/pull/1/merge</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; 3c8d735ee16296c242be7a9742ebfbc2665adec1	refs/pull/2/head</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; 15c9f4f80973a2758462ab2066b6ad9fe8dcf03d	refs/pull/2/merge</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; a5a7751a33b7e86c5e9bb07b26001bb17d775d1a	refs/pull/4/head</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; 31a45fc257e8433c8d8804e3e848cf61c9d3166c	refs/pull/4/merge</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># refs/pull/*/head  - The forked branch from which this PR came</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># refs/pull/*/merge - What the current branch would look like after</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#					  hitting the merge button</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add the repo as origin, then hit</span>
</span></span><span style="display:flex;"><span>git fetch origin refs/pull/2/head
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This tells Git, “Connect to the origin remote, and download the ref</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># named refs/pull/2/head.” Git happily obeys, and downloads everything</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># you need to construct that ref, and puts a pointer to the commit you</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># want under .git/FETCH_HEAD. You can follow that up with git merge</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># FETCH_HEAD into a branch you want to test it in, but that merge</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># commit message looks a bit weird. Also, if you’re reviewing a lot of</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># pull requests, this gets tedious.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Modify .git/config</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; [remote &#34;origin&#34;]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt;     url = https://github.com/musq/dotfiles</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt;     fetch = +refs/heads/*:refs/remotes/origin/*</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt;     fetch = +refs/pull/*/head:refs/remotes/origin/pr/*</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># That last line tells Git, &#34;All the refs that look like</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># refs/pull/123/head should be stored locally like</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># refs/remotes/origin/pr/123.&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Now do a git fetch</span>
</span></span><span style="display:flex;"><span>git fetch
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; # …</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt;  * [new ref]         refs/pull/1/head -&gt; origin/pr/1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt;  * [new ref]         refs/pull/2/head -&gt; origin/pr/2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt;  * [new ref]         refs/pull/4/head -&gt; origin/pr/4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; # …</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create branch pr/2 from origin/pr/2 and begin tracking it</span>
</span></span><span style="display:flex;"><span>git checkout pr/2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Optionally rebase it onto master branch</span>
</span></span><span style="display:flex;"><span>git rebase master
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Merge it with master</span>
</span></span><span style="display:flex;"><span>git checkout master
</span></span><span style="display:flex;"><span>git merge pr/2
</span></span></code></pre></div><!-- raw HTML omitted -->
<h2 id="releases">
  Releases
  <a href="#releases" class="h-anchor" aria-hidden="true">#</a>
</h2>
<hr>
<h3 id="semantic-versioning">
  Semantic versioning
  <a href="#semantic-versioning" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>Follow <a href="https://semver.org">semantic versioning</a> scheme for your
releases.</p>
<p>Given a version number <code>MAJOR.MINOR.PATCH</code>, increment the:</p>
<ol>
<li><code>MAJOR</code> version when you make incompatible API changes</li>
<li><code>MINOR</code> version when you add functionality in a backwards-compatible
manner</li>
<li><code>PATCH</code> version when you make backwards-compatible bug fixes.</li>
</ol>
<p>Additional labels for pre-release and build metadata are available as
extensions to the <code>MAJOR.MINOR.PATCH</code> format.</p>
<h3 id="generate-build-number">
  Generate Build number
  <a href="#generate-build-number" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Generate a build number</span>
</span></span><span style="display:flex;"><span>git describe master
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; v1.6.2-rc1-20-g8c5b85c</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># In response, Git generates a string consisting of the name of the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># most recent tag earlier than that commit, followed by the number</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># of commits since that tag, followed finally by a partial SHA-1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># value of the commit being described (prefixed with the letter &#34;g&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># meaning Git)</span>
</span></span></code></pre></div><h3 id="prepare-assets">
  Prepare Assets
  <a href="#prepare-assets" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># For gzip files</span>
</span></span><span style="display:flex;"><span>git archive master --prefix<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;project/&#39;</span> | gzip &gt; <span style="color:#e6db74">`</span>git describe master<span style="color:#e6db74">`</span>.tar.gz
</span></span><span style="display:flex;"><span><span style="color:#75715e"># It generates a file named like: v1.6.2-rc1-20-g8c5b85c.tar.gz</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># For zip files</span>
</span></span><span style="display:flex;"><span>git archive master --prefix<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;project/&#39;</span> --format<span style="color:#f92672">=</span>zip &gt; <span style="color:#e6db74">`</span>git describe master<span style="color:#e6db74">`</span>.zip
</span></span></code></pre></div><h3 id="gpg-public-key-as-tag">
  GPG public key as tag
  <a href="#gpg-public-key-as-tag" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>If you do sign your tags, you may have the problem of distributing the
public GPG key used to sign your tags. You can solve this issue by
including your public key as a blob in the repository and then adding
a tag that points directly to that content.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Find out the fingerprint of the key used to sign your tags/commits</span>
</span></span><span style="display:flex;"><span>gpg --list-keys
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The desired key - 013B49A9</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Export the key as blob</span>
</span></span><span style="display:flex;"><span>gpg --armor --export 013B49A9 | git hash-object -w --stdin
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; 659ef79kd181633c87ec71ac3f9ba29fe5775b92</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Tag this blob object</span>
</span></span><span style="display:flex;"><span>git tag -a musq-pgp-pub 659ef79kd181633c87ec71ac3f9ba29fe5775b92
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Import key</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Clone this project and import key from this tag</span>
</span></span><span style="display:flex;"><span>git show musq-pgp-pub | gpg --import
</span></span></code></pre></div><!-- raw HTML omitted -->
<h2 id="internals">
  Internals
  <a href="#internals" class="h-anchor" aria-hidden="true">#</a>
</h2>
<hr>
<p>When you run <code>git init</code> in a new or existing directory, Git creates
the <code>.git</code> directory, which is where almost everything that Git stores
and manipulates is located. If you want to back up or clone your
repository, copying this single directory elsewhere gives you nearly
everything you need. Let&rsquo;s check what&rsquo;s inside this &mdash;</p>
<p><code>ls -la .git</code></p>
<ul>
<li><code>COMMIT_EDITMSG</code> file is created when you run <code>git commit</code>. It opens
your EDITOR program to edit this file. When your editor exits, it reads
the file and saves it as the message for the commit.</li>
<li><code>config</code> file contains your project-specific configuration options</li>
<li><code>description</code> file is used only by the GitWeb program, so don’t worry
about it</li>
<li><code>FETCH_HEAD</code> file records the branch which you fetched from a remote</li>
<li><code>HEAD</code> file points to the branch you currently have checked out</li>
<li><code>hooks</code> directory contains your client- or server-side hook scripts</li>
<li><code>index</code> file is where Git stores your staging area information</li>
<li><code>info</code> file keeps a global exclude file for ignored patterns that you
don’t want to track in a .gitignore file</li>
<li><code>logs</code> directory contains the reflog information</li>
<li><code>MERGE_HEAD</code> file points to the head of the source branch that we are
merging into our destination branch.</li>
<li><code>objects</code> directory stores all the content for your database</li>
<li><code>ORIG_HEAD</code> file is created by commands that move your HEAD in a
drastic way, to record the position of the HEAD before their operation,
so that you can easily change the tip of the branch back to the state
before you ran them.</li>
<li><code>packed-refs</code> file contains the refs in packed form</li>
<li><code>refs</code> directory stores pointers into commit objects in that data
(branches, tags, remotes and more)</li>
</ul>
<h3 id="objects">
  Objects
  <a href="#objects" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><strong>Highly Recommended</strong> — <a href="https://git-scm.com/book/en/v2/Git-Internals-Git-Objects">https://git-scm.com/book/en/v2/Git-Internals-Git-Objects</a></p>
<p>There are four types of objects in git:</p>
<ul>
<li><code>blob</code> - snapshots of individual files stored in files with names
as the resulting SHA1 hash</li>
<li><code>tree</code> - contains pointers to blobs</li>
<li><code>commit</code> - contains pointers to blobs and trees</li>
<li><code>tag</code> - (only for annotated tags) contains pointer to a commit</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Write data to an blob object</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -w tells it to write the data in the database</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#39;abc xyz&#39;</span> | git hash-object -w --stdin
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; 08c25e8dc5322b84902fbd98d0adbd33c0211ce8</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The output from the above command is a 40-character checksum hash</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This is the SHA-1 hash — a checksum of the content you’re storing</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># plus a header</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Blob object is stored in</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># .git/objects/08/c25e8dc5322b84902fbd98d0adbd33c0211ce8</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The first 2 chars are used as the directory name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The other 38 chars are used as file name</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Read object contents</span>
</span></span><span style="display:flex;"><span>git cat-file -p 08c25e8dc5322b84902fbd98d0adbd33c0211ce8
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; abc xyz</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Read object type</span>
</span></span><span style="display:flex;"><span>git cat-file -t 08c25e8dc5322b84902fbd98d0adbd33c0211ce8
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; blob</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Further reading about tree and commit objects at</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://git-scm.com/book/en/v2/Git-Internals-Git-Objects</span>
</span></span></code></pre></div><h3 id="references">
  References
  <a href="#references" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>A reference is simple memorable name that acts as an alias for a commit,
so that it is easier to access that commit.
References are actually the names of files stored in <code>.git/refs</code> which
contain the commit SHA-1 to which they are aliased.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Manually change the pointer of master branch</span>
</span></span><span style="display:flex;"><span>echo 1a410efbd13591db07496601ebc7a059dd55cfe9 &gt; .git/refs/heads/master
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This does the same thing, but it&#39;s safer</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># It&#39;s what git uses on git checkout &lt;branch&gt;</span>
</span></span><span style="display:flex;"><span>git update-ref refs/heads/master 1a410efbd13591db07496601ebc7a059dd55cfe9
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a branch on the given commit</span>
</span></span><span style="display:flex;"><span>git update-ref refs/heads/dev a1b2c3d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a lightweight tag (non annotated)</span>
</span></span><span style="display:flex;"><span>git update-ref refs/tags/v1.9.2 cac0cab538b970a37ea1e769cbbde608743bc96d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Note - If you create an annotated tag, Git creates a tag object</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># and then writes a reference to point to it rather than directly</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># to the commit.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># See what&#39;s inside .git/HEAD file</span>
</span></span><span style="display:flex;"><span>cat .git/HEAD
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; ref: refs/heads/master</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Safely read content of HEAD, same thing as above</span>
</span></span><span style="display:flex;"><span>git symbolic-ref HEAD
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Safely set the new value of HEAD</span>
</span></span><span style="display:flex;"><span>git symbolic-ref HEAD refs/heads/dev
</span></span></code></pre></div><h4 id="remote-refs">
  Remote refs
  <a href="#remote-refs" class="h-anchor" aria-hidden="true">#</a>
</h4>
<p>Remote references differ from branches (refs/heads references) mainly
in that they’re considered read-only. Git manages them as bookmarks to
the last known state of where those branches were on those servers.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># See what&#39;s inside a remote ref</span>
</span></span><span style="display:flex;"><span>cat .git/refs/remotes/origin/master
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; ca82a6dff817ec66f44342007202690a93763949</span>
</span></span></code></pre></div><h3 id="packfiles">
  Packfiles
  <a href="#packfiles" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><a href="https://git-scm.com/book/en/v2/Git-Internals-Packfiles">https://git-scm.com/book/en/v2/Git-Internals-Packfiles</a></p>
<p>Git optimizes its datastore by removing redundant blob objects and
packing everything up in packfiles <code>*.pack</code> and indexes <code>*.idx</code>. These
reside in <code>.git/objects/pack/</code>.</p>
<p>This is done on running garbage collector <code>git gc</code>, or pushing changes
<code>git push</code>.</p>
<h3 id="garbage-collection">
  Garbage collection
  <a href="#garbage-collection" class="h-anchor" aria-hidden="true">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Run soft garbage collection</span>
</span></span><span style="display:flex;"><span>git gc --auto
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This generally does nothing. You must have around 7,000 loose objects</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># or more than 50 packfiles for Git to fire up a real gc command.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Modify these limits with the gc.auto and gc.autopacklimit</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># config settings, respectively.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Also packs up references (.git/refs/*) into a single file</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># named .git/packed-refs</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If you update a reference, Git doesn’t edit this file but instead</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># writes a new file to refs/heads. To get the appropriate SHA-1 for a</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># given reference, Git checks for that reference in the refs directory</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># and then checks the packed-refs file as a fallback. However, if you</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># can’t find a reference in the refs directory, it’s probably in your</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># packed-refs file.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># See what&#39;s inside .git/packed-refs</span>
</span></span><span style="display:flex;"><span>cat .git/packed-refs
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; # pack-refs with: peeled fully-peeled</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; cac0cab538b970a37ea1e769cbbde608743bc96d refs/heads/experiment</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; ab1afef80fac8e34258ff41fc1b867c702daa24b refs/heads/master</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; cac0cab538b970a37ea1e769cbbde608743bc96d refs/tags/v1.0</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; 9585191f37f7b0fb9444f35a9bf50de191beadc2 refs/tags/v1.1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; ^1a410efbd13591db07496601ebc7a059dd55cfe9</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Notice the last line of the file, which begins with a ^. This means</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># the tag directly above is an annotated tag and that line is the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># commit that the annotated tag points to.</span>
</span></span></code></pre></div><h3 id="fsck">
  Fsck
  <a href="#fsck" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>If you delete reflog using <code>rm -Rf .git/logs/</code>, us can still recover
your commits using <code>git fsck</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Shows all objects that aren’t pointed to by another object</span>
</span></span><span style="display:flex;"><span>git fsck --full
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; Checking object directories: 100% (256/256), done.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; Checking objects: 100% (18/18), done.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; dangling blob d670460b4b4aece5915caf5c68d12f560a9fe3e4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; dangling commit ab1afef80fac8e34258ff41fc1b867c702daa24b</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; dangling tree aea790b9a58f6cf6f2804eeac9f0abbe9631e4c9</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &gt; dangling blob 7108f7ecb345ee9d0084193f147cdad4d2998293</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># In this case, you can see your missing commit after the string</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &#34;dangling commit&#34;. You can recover it the same way, by adding</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># a branch that points to that SHA-1.</span>
</span></span></code></pre></div><h3 id="removing-objects">
  Removing objects
  <a href="#removing-objects" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><a href="https://git-scm.com/book/en/v2/Git-Internals-Maintenance-and-Data-Recovery#_removing_objects">https://git-scm.com/book/en/v2/Git-Internals-Maintenance-and-Data-Recovery#_removing_objects</a></p>
<p>If someone at any point in the history of your project added a single
huge file, every clone for all time will be forced to download that
large file, even if it was removed from the project in the very next
commit. Because it’s reachable from the history, it will always be
there. Git can be instructed to remove such objects.</p>
<p><strong>Be warned: this technique is destructive to your commit history.</strong></p>
<p>It rewrites every commit object since the earliest tree you have to
modify to remove a large file reference. If you do this immediately
after an import, before anyone has started to base work on the commit,
you’re fine – otherwise, you have to notify all contributors that they
must rebase their work onto your new commits.</p>
<h3 id="environment-variables">
  Environment variables
  <a href="#environment-variables" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><a href="https://git-scm.com/book/en/v2/Git-Internals-Environment-Variables">https://git-scm.com/book/en/v2/Git-Internals-Environment-Variables</a></p>
<p>Git always runs inside a bash shell, and uses a number of shell
environment variables to determine how it behaves. It comes in handy to
know what these are, and how they can be used to make Git behave the
way you want it to.</p>
<!-- raw HTML omitted -->
<h2 id="extras">
  Extras
  <a href="#extras" class="h-anchor" aria-hidden="true">#</a>
</h2>
<hr>
<h3 id="bashzsh-helpers">
  Bash/Zsh helpers
  <a href="#bashzsh-helpers" class="h-anchor" aria-hidden="true">#</a>
</h3>
<ul>
<li>
<p><code>git-completion.bash</code> -
[<a href="https://github.com/git/git/blob/master/contrib/completion/git-completion.bash">source</a>]
Support completion of options</p>
</li>
<li>
<p><code>git-prompt.sh</code> -
[<a href="https://github.com/git/git/blob/master/contrib/completion/git-prompt.sh">source</a>]
Show repository status in prompt</p>
</li>
</ul>
<p>Usage instructions are provided inside each script.</p>
<h3 id="bare-repo">
  Bare Repo
  <a href="#bare-repo" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>A bare repository does not have a working tree. It only has commit
database. I&rsquo;m not sure about the staging area, though. It is the
recommended way to set up Git on a server from which users will only
interact by pushing/pulling and will never need to checkout a working
tree there.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Initialize a bare repo</span>
</span></span><span style="display:flex;"><span>git init --bare
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Clone another repo as a bare repo</span>
</span></span><span style="display:flex;"><span>git clone --bare https://github.com/musq/dotfiles
</span></span></code></pre></div><h3 id="git-on-a-server">
  Git on a server
  <a href="#git-on-a-server" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><a href="https://git-scm.com/book/en/v2/GitHub-Account-Setup-and-Configuration">https://git-scm.com/book/en/v2/GitHub-Account-Setup-and-Configuration</a></p>
<p>A Git repo can be served using any of the these protocols:</p>
<ol>
<li><code>HTTPS</code> - For public anonymous users. Unauthenticated, Secure.</li>
<li><code>SSH</code> - For authenticated users. Authenticated, Secure</li>
<li><code>GIT</code> - Unauthenticated, Insecure.</li>
</ol>
<p>To set up SSH, create a user named <code>git</code>, and add your users public
ssh keys in this users .ssh/authorized_keys file. That way, you&rsquo;d only
need to create a single user on your server for SSH purposes.</p>
<p>You can easily restrict the git user account to only Git-related
activities with a limited shell tool called git-shell that comes with
Git. If you set this as the git user account’s login shell, then that
account can’t have normal shell access to your server. To use this,
specify <code>git-shell</code> instead of <code>bash</code> or <code>csh</code> for that account&rsquo;s
login shell.</p>
<p><code>sudo chsh git -s $(which git-shell)</code></p>
<h3 id="scripting-github">
  Scripting GitHub
  <a href="#scripting-github" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p><a href="https://git-scm.com/book/en/v2/GitHub-Scripting-GitHub">https://git-scm.com/book/en/v2/GitHub-Scripting-GitHub</a></p>
<p>Use the GitHub hooks system and its API to make GitHub work how you
want it to.</p>
<!-- raw HTML omitted -->
<hr>
<h2 id="source">
  Source
  <a href="#source" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p><a href="https://git-scm.com/book/en/v2">Pro Git</a> — Scott Chacon and Ben Straub</p>

    </div>
    

    
      
    
  </article>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >cd /home/imran</span
    >
    <span class="logo__cursor"></span>
  
</a>

			<span>©2023  Imran Hossain <a href="/about"><b>Contact me</b></b></a></span>
    
  </div>
</footer>





<script type="text/javascript" src="/bundle.min.js"></script>


      
    </div>

    
  </body>
</html>
